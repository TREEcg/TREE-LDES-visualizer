{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?2a2f","webpack:///./src/App.vue","webpack:///./src/components/dataFunctions.js","webpack:///./src/components/drawCurrentPage.js","webpack:///./src/components/drawCurrentMembers.js","webpack:///./src/components/drawGraph.js","webpack:///./src/App.vue?dfb6","webpack:///./src/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","id","class","style","for","type","autocomplete","list","data_url","placeholder","open","start","undefined","close","tabindex","exampleMap","keyX","valueX","setUrl","title","dataResult","collectionStats","mainInfo","rootInfo","attributes","entries","shapePresent","openShape","closeShape","shapeInformation","identifies","remaining","remainingMembers","picked","shape_validation","nodeValidation","keys","valueY","keyY","remarks","size","myMetadata","extractMetadata","require","streamifyArray","stringifyStream","factory","ParserN3","SHACLValidator","DataFactory","N3","namedNode","defaultGraph","jsondata","Map","members","membersFailed","relationLabelMap","redirectMappings","urlMappings","qtext","newImportLinks","Set","importedQuads","collectionRef","loaded","relations","shapeTargets","collectionSpecial","nodeSpecial","relationSpecial","dcterms","hydra","rdf","shacl","rdfs","tree","ldes","st","collectionAttributes","setDataUrl","url","clearData","addImportLinks","getImportLinks","forEach","v","add","found","import","importX","conditionalImport","extractId","store","quadsWithSubj","extractShapeHelp","textStream","rdfSerializer","serialize","contentType","extractShapeId","extractShape","getShapeIds","shapeIds","concat","getQuads","map","quad","checked","termType","includes","addTarget","Promise","resolve","store2","extractShapeNext","newq","rdfDereferencer","dereference","catch","error","set","then","quads","on","console","errM","addQuads","targetQuads","tempTarget","t1","t2","addQuad","extractShapeMembers","ids","derefCollection","collectionUrl","collectionCallBack","fallBackNoType","collections","Array","from","values","parseCollectionTreeData","parseCollection","metadata","view","viewNode","double","checker","nodes","has","views","node","filter","element","relation","relation_count","pAttr","mapAddToSet","links","typeX","attrX","JSON","stringify","myMap","myKey","myValue","mapDeleteAll","delete","vX","getData","urlX","stopped","promiseResolve1","promiseResolve2","promiseResolve3","p1","p2","p3","dereferenced","promiseResult","promiseResolveResult","all","alert","errorText","collection","collectionId","collectionObj","parseNewCollection","testDoubleCollection","parseViewNodes","parseRegularNodes","getImportsAndMembers","nodeId","nodeObj","parseRelationsAndLinks","shapes","shape","res","vocab","tempN","tempN2","tempNMapping","it","nodeName","remainingItems","relationJson","parseRelationsAndLinksHelper","AddNewLinks","relationObj","every","Number","wantedAttrs","wAttr","createLinkLabels","vT","split","tempKey","tempSet","tempValue","iter","subset","fix","myNode","newNodeMembersId","mId","k","importPromises","reject","newQuads","e","member","membIds","memberPromises","mtemp","validateShape","loadDatasetX","stream","parser","dataset","shapesX","dataX","dtX","sX","subject","validator","report","validate","conforms","results","mX","message","mt","path","focusNode","severity","sourceConstraintComponent","sourceShape","svgHolder","svgGHolder","remainingSetter","svgE","svgEG","offH","tt","remainingMembersSetter","holder","holderId","setValues","_svgHolder","_svgGHolder","_remainingSetter","_jsondata","_addImportLinks","_start","_members","drawCurrentPage","newG","selectAll","remove","append","attr","expandRelationHolderNodeInfo","this","expandRelationHolder","bbox","getBBox","width","x","height","y","updateWidth","document","getElementById","setAttribute","newHeight","offsetHeight","widthBox","getBoundingClientRect","innerg","table","thead","tbody","tableColumns","tableData","parseTableData","theadRow","enter","text","column","count","trX","insertRow","textX","createTextNode","tdX","insertCell","appendChild","btnExpand","createElement","onclick","tableClick","innerHTML","btnFollow","getAttribute","visibility","createExtraCell","containerDiv","classList","colSpan","btnCollapse","btnFollowC","bboxT","offsetWidth","navigator","clipboard","writeText","totalMembers","textArray","regex","match","indent","replace","relX","rowData","pop","tempV","tempP","index","relationData","expand","event","ctrlKey","textXX","_membersFailed","_remainingMembersSetter","_nodeValidation","_holderId","drawMembers","replaceChildren","showMemberHolder","tempA","details","summary","textHolder","myGreen","svg","link","myLinkData","linkLabel","parentIdString","alpha_decay_rate","nodeDistance","_myGreen","_parentIdString","_linkData","updateSelected","drawGraph","d3","linkData","targets","target","fakeLink","source","txt","join","clickCollection","dragstartX","dragendX","dragX","raise","select","lower","tg","selected","clickShape","force","alphaDecay","firstTick","zoom","transform","fixLinks","fixGroupChildren","ticked","scaleN","angle","Math","atan","PI","currentg","parentNode","classed","_groups","expandCollection","expandCollectionTrue","expandShape","expandShapeTrue","shape_extra","next_url","checked_shape","checked_remarks","emptyURL","urlList","tableObserver","created","listUrl","location","parse","decodeURIComponent","lastUrl","promiseResolve","derefList","derefUrl","mounted","startObserver","methods","disconnect","ResizeObserver","observe","draw","history","pushState","encodeURIComponent","toString","svgClear","cB","setSVGElements","findLastNode","drawExtra","collectionCB","display","str","render","createApp","App","mount"],"mappings":"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","file":"js/app.ca17d057.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/TREE-LDES-visualizer/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=7429b407&lang=css\"","<template>\n  <h1>Visualizer</h1>\n  <div id=\"visualizerContainer\">\n    <div class=\"textContent\">\n      <h2>A tool to visualize and validate a tree:Collection</h2>\n\n      <div>\n        <label style=\"vertical-align: top;\" for=\"url\">Enter URL: </label>\n        <div id=\"examplesDiv\" style=\"margin: auto; display: inline-block; vertical-align: top;\">\n          <input type=\"url\" autocomplete=\"off\" list=\"exT\" v-model=\"data_url\" placeholder=\"URL\" name=\"url\" v-on:click.stop=\"open()\" v-on:keyup.enter=\"start(undefined)\" v-on:blur=\"close()\">\n          <ul id=\"fakeExamples\" tabindex=\"1\" v-on:blur=\"close()\">\n            <li v-on:mousedown=\"setUrl(valueX)\" v-for=\"[keyX, valueX] in this.exampleMap\" v-bind:key=\"keyX\" :title=valueX>\n              {{keyX}}\n            </li>\n          </ul>\n        </div>\n        <button style=\"vertical-align: top; margin-left: 4px; margin-top: 1px;\" v-on:click=\"start(undefined)\">Go</button>\n      </div>\n\n\n      <div v-if=\"this.dataResult\" id=\"information\" style=\"white-space: pre\">\n        <br>\n        <div v-if=\"this.dataResult.collectionStats.mainInfo\">\n          <p>{{this.dataResult.collectionStats.mainInfo}}</p>\n        </div>\n        <div v-if=\"this.dataResult.collectionStats.rootInfo\">\n          <p>{{this.dataResult.collectionStats.rootInfo}}</p>\n        </div>\n        <div v-if=\"this.dataResult.collectionStats.attributes\">\n          <li v-for=\"[keyX, valueX] in Object.entries(this.dataResult.collectionStats.attributes)\" v-bind:key=\"keyX\">\n            {{keyX}}: {{valueX}}\n          </li>\n        </div>\n        <div v-if=\"this.dataResult.shapePresent\" style=\"display:inline-block; margin-bottom:1rem;\">\n          <p v-on:click=\"openShape\" style=\"display:inline\">Found a shape, </p>\n          <p id=\"shapeClosed\" v-on:click=\"openShape\" style=\"display:inline; font-weight:bold; cursor: pointer;\">click to show.</p>\n          <p id=\"shapeOpenedText\" v-on:click=\"closeShape\" style=\"display:none; font-weight:bold; cursor: pointer;\">click to hide.</p>\n          <p id=\"shapeOpened\" v-on:click=\"closeShape\" style=\"display:none;\">{{this.dataResult.shapeInformation}}</p>\n          <br>\n        </div>\n        <div style=\"min-height:5rem;\">\n          <p>{{this.identifies}}</p>\n          <p>{{this.remaining}}</p>\n          <p>{{this.remainingMembers}}</p>\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"this.data_url\">\n\n\n      <div class=\"flexContainer\">\n        <div class=\"textContent resizableContainers\">\n          <h3>Selected resource</h3>\n          <div id=\"currentPage\"></div>\n        </div>\n        <div class=\"textContent resizableContainers\">\n          <h3>Graph</h3>\n          <div id=\"graph\"></div>\n        </div>\n      </div>\n      <div class=\"flexContainer\">\n        <div class=\"textContent resizableContainers\">\n          <h3>Members</h3>\n          <div id=\"members\"></div>\n        </div>\n\n        <div class=\"textContent resizableContainers\">\n          <h3>Log</h3>\n\n          <div id=\"log\" class=\"textContent\">\n            <div id=\"v-model-radiobutton\">\n              <input type=\"radio\" id=\"one\" value=\"Remarks\" v-model=\"picked\" />\n              <label for=\"one\">Remarks</label>\n              <br />\n              <input type=\"radio\" id=\"two\" value=\"Shape\" v-model=\"picked\" />\n              <label for=\"two\">Shape Validation</label>\n              <br />\n            </div>\n\n            <div>\n              <div v-if=\"picked === 'Shape' && this.dataResult\">\n                <div v-if=\"this.dataResult.shape_validation == false || this.dataResult.shape_validation == true\">\n                  <br><p>All members conform to shape: {{this.dataResult.shape_validation}}</p><br>\n                </div>\n                <div v-else>\n                  <br><p>No validation report available.<br>\n                    Either no members were found in all dereferenced resources or no shape was found.</p>\n                </div>\n                <div v-for=\"(valueX, keyX) in this.dataResult.nodeValidation\" v-bind:key=\"valueX\" >\n                  <p style=\"font-weight:bold;\">Report for {{keyX}}:</p>\n                  <div v-if=\"Object.keys(valueX).length > 0\">\n                     <br>\n                     <div class=\"spacing\" v-for=\"(valueY, keyY) in valueX\" v-bind:key=\"valueY\" >\n                       {{keyY}}\n                       {{valueY}}\n                       <br>\n                     </div>\n                  </div>\n                  <div v-else>\n                    All members passed validation.\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div v-if=\"picked === 'Remarks' && this.dataResult\">\n              <div v-if=\"this.dataResult.remarks.size > 0\">\n                <div style=\"white-space: pre-line\">\n                  <li v-for=\"[keyX, valueX] in this.dataResult.remarks\" v-bind:key=\"valueX\" >\n                    <div style=\"white-space: pre\" v-if=\"valueX != ''\">\n                      <br>\n                      <p style=\"font-weight:bold;\">Remarks for {{keyX}}:</p>\n                      <p>{{valueX}}</p>\n                    </div>\n                    <div v-else>\n                      <br>\n                      <p style=\"font-weight:bold;\">Remarks for {{keyX}}:</p>\n                      <p>Nothing to remark.</p>\n                    </div>\n                  </li>\n                </div>\n              </div>\n              <div v-else>\n                <p>No remarks available.</p>\n              </div>\n            </div>\n\n          </div>\n        </div>\n      </div>\n      <!-- This empty div allows user to resize easily -->\n      <div style=\"height: 100px;\"></div>\n    </div>\n\n  </div>\n</template>\n\n\n<script>\n\nimport * as d3 from \"d3\";\nimport * as dF from './components/dataFunctions.js';\nimport * as dP from './components/drawCurrentPage.js';\nimport * as dM from './components/drawCurrentMembers.js';\nimport * as dG from './components/drawGraph.js';\n\n/*\nPOSSIBLE TODO OVERVIEW\n  show what members actually got validated, member might not have correct attributes targeted by shape\n  support for multiple collections at the same URL?\n  support for multiple nodes at the same URL?\n  support for working importStream\n    this means adding it to function addImportLinks(data)\n  support for working tree:search\n  Fix graph to add nodes instead of always redrawing https://observablehq.com/@d3/build-your-own-graph?collection=@d3/d3-force\n  Shacl shape 'getter' only follows the link at tree:shape, there might be more to import\n  pagination / fragmentation info for ldes streams\n*/\n\nexport default {\n  name: 'Visualizer',\n  data(){\n    return {\n      exampleMap: new Map([\n        [\"Streets of Flemish Address Registry\", \"https://tree.linkeddatafragments.org/data/addressregister/streetnames/\"],\n        [\"Visual Thesaurus for Fashion & Costumes\", \"https://treecg.github.io/demo_data/vtmk.ttl\"],\n        [\"Municipalities of Flemish Address Registry\", \"https://tree.linkeddatafragments.org/data/addressregister/municipalities/\"],\n        [\"Cultural Historic Thesaurus\", \"https://treecg.github.io/demo_data/cht.ttl\"],\n        [\"Public Transport Stops in Flanders\", \"https://treecg.github.io/demo_data/stops.ttl\"],\n        [\"Digital Heritage Fragments about WW2\", \"https://demo.netwerkdigitaalerfgoed.nl/fragments/wo2/\"],\n        [\"Demo data Shacl validation\", \"https://raw.githubusercontent.com/TREEcg/TREE-LDES-visualizer/main/src/assets/cht_1_2.ttl\"],\n        [\"Demo data Import statements\", \"https://raw.githubusercontent.com/TREEcg/TREE-LDES-visualizer/main/src/assets/testerMultipleImports.ttl\"],\n        [\"Demo data ldes stream\", \"https://graph.irail.be/sncb/connections/feed\"]\n      ]),\n      svgHolder: null,\n      svgGHolder: null,\n      remarks: new Map(),\n      next_url: \"\",\n      checked_shape: false,\n      checked_remarks: false,\n      picked: 'Remarks',\n      data_url: undefined,\n      shape_validation: null,\n      nodeValidation: {},\n      selected: 0,\n      alpha_decay_rate: 0.5,//1 - Math.pow(0.001, 1 / 300)\n      emptyURL: \"\",\n      urlList: [],\n      remaining: \"\",\n      remainingMembers: \"\",\n      identifies: \"\",\n      collectionStats: {},\n      shapeInformation: \"\",\n      shapePresent: undefined,\n      myGreen: \"rgba(0, 128, 0, 0.5)\",\n      tableObserver: undefined,\n      dataResult: undefined,\n    }\n  },\n  created() {\n    var listUrl = (\"\" + window.location).split('#p=');\n    this.emptyURL = listUrl.shift();\n    if (listUrl.length <= 0){\n      return;\n    }\n    listUrl = listUrl[0].split('&p=');\n    this.urlList = JSON.parse(JSON.stringify(listUrl));\n    listUrl = listUrl.map(v => decodeURIComponent(v));\n    if (listUrl.length > 0){\n      const lastUrl = listUrl.pop();\n      dF.clearData();\n      if (listUrl.length > 0){\n        var promiseResolve;\n        var p = new Promise(function(resolve){\n          promiseResolve = resolve;\n        });\n        this.derefList(listUrl.shift(), listUrl, promiseResolve);\n\n        p.then(() => this.derefUrl(lastUrl, true));\n      } else {\n        this.derefUrl(lastUrl, true);\n      }\n    }\n  },\n  mounted(){\n    this.startObserver();\n  },\n  methods : {\n\n    // url = undefined & this.data_url defined if you wish to start a new collection\n    // url = undefined will also reset the path save in the page url\n    startObserver(){\n      // This fixes the size off the table showing relations etc.\n      if (this.tableObserver){\n        this.tableObserver.disconnect();\n      } else {\n        this.tableObserver = new ResizeObserver(function(){\n          if (document.getElementById(\"currentPage\") && document.getElementById(\"currentPage\").offsetWidth){\n            dP.updateWidth(document.getElementById(\"currentPage\").offsetWidth);\n          }\n        });\n      }\n      if (document.getElementById(\"currentPage\")){\n        this.tableObserver.observe(document.getElementById(\"currentPage\"));\n      }\n\n    },\n    start(url, draw = false){\n      if (!url){\n        draw = true;\n      }\n      this.derefUrl(url, draw);\n\n      if (!url && dF.data_url){\n        window.history.pushState({}, document.title, this.emptyURL+\"#p=\"+encodeURIComponent(dF.data_url));\n        this.urlList = [dF.data_url];\n      } else if (dF.data_url && !this.urlList.includes(dF.data_url) && (window.location.toString().length + 3 + encodeURIComponent(dF.data_url).length) < 2000){\n        window.history.pushState({}, document.title, window.location+\"&p=\"+encodeURIComponent(dF.data_url));\n        this.urlList.push(dF.data_url);\n      } else if (!dF.data_url){\n        window.history.pushState({}, document.title, this.emptyURL);\n        this.urlList = [];\n      }\n    },\n    derefList(url, list, promiseResolve){\n      dF.getData(url).then(() => {\n        if (list.length == 0){\n          promiseResolve();\n        } else {\n          this.derefList(list.shift(), list, promiseResolve);\n        }\n      });\n    },\n    async derefUrl(url, draw = false){\n      if (!url && !this.data_url){\n        this.svgClear();\n        dF.setDataUrl(undefined);\n        alert(\"Please define a starting point\");\n        return;\n      }\n\n      if (url){\n        this.data_url = url;\n      } else {\n        this.svgClear();\n      }\n\n      dF.setDataUrl(this.data_url);\n      this.dataResult = await dF.getData(url);\n      this.data_url = this.dataResult.data_url\n      if (!this.dataResult.dereferenced){\n        this.cB(draw);\n      } else {\n        this.cB();\n      }\n\n    },\n    svgClear(){\n\n      this.identifies = undefined;\n      this.remaining = undefined;\n      this.remainingMembers = undefined;\n      if (this.dataResult){\n        this.dataResult.collectionStats = {};\n        this.dataResult.shapePresent = undefined;\n        this.dataResult.shapeInformation = undefined;\n      }\n      this.svgHolder = null;\n      this.svgGHolder = null;\n      d3.selectAll(\"#currentPage\").selectAll(\"svg\").remove();\n    },\n    cB(draw = true){\n      this.setSVGElements();\n\n      if (!this.findLastNode(this.dataResult.data_url)){\n        this.findLastNode(this.dataResult.redirectMappings.get(this.dataResult.data_url));\n      }\n\n      if (this.dataResult && this.dataResult.jsondata.shapes && this.dataResult.jsondata.shapes[0] && this.dataResult.jsondata.shapes[0][\"shape_extra\"]){\n        this.dataResult.shapeInformation = this.dataResult.jsondata.shapes[0][\"shape_extra\"];\n        this.dataResult.shapePresent = true;\n      } else if (this.dataResult){\n        this.dataResult.shapePresent = undefined;\n      }\n\n      dG.setValues(this.myGreen, this.dataResult.jsondata, \"graph\", this.dataResult.relationLabelMap, this.start);\n      if (draw){\n        dG.drawGraph();\n      }\n    },\n    findLastNode(lastUrl){\n      let found = false;\n      if (this.dataResult.jsondata.nodes.length > 0){\n        for (let n of this.dataResult.jsondata.nodes){\n          if (n.name == lastUrl){\n            n.selected = true;\n            this.drawExtra(n);\n            found = true;\n            if (this.dataResult.jsondata[n.id] && this.dataResult.jsondata[n.id].remainingItems > 0){\n              this.remaining = \"Remaining items identified via relation properties for selected resource: \" + this.dataResult.jsondata[n.id].remainingItems + \".\\n\";\n            }\n            this.identifies = \"Selected resource identifies a node.\\n\";\n          } else {\n            n.selected = false;\n          }\n        }\n      }\n\n      if (this.dataResult.jsondata.views.length > 0){\n        for (let n of this.dataResult.jsondata.views){\n          if (n.name == lastUrl){\n            n.selected = true;\n            this.drawExtra(n);\n            found = true;\n            if (this.dataResult.jsondata[n.id] && this.dataResult.jsondata[n.id].remainingItems > 0){\n              this.remaining = \"Remaining items identified via relation properties for selected resource: \" + this.dataResult.jsondata[n.id].remainingItems + \".\\n\";\n            }\n            this.identifies = \"Selected resource identifies a view.\\n\";\n          } else {\n            n.selected = false;\n          }\n        }\n      }\n      return found;\n    },\n    collectionCB(){\n      this.collectionStats = this.dataResult.collectionStats;\n      this.remarks = this.dataResult.remarks;\n    },\n    setUrl(value){\n      this.data_url = value;\n      this.start(undefined);\n    },\n    close(){\n      document.getElementById(\"fakeExamples\").style.display = \"none\";\n    },\n    open(){\n      document.getElementById(\"fakeExamples\").style.display = \"inline-block\";\n    },\n    openShape(){\n      document.getElementById(\"shapeClosed\").style.display = \"none\";\n      document.getElementById(\"shapeOpenedText\").style.display = \"inline\";\n      document.getElementById(\"shapeOpened\").style.display = \"block\";\n    },\n    closeShape(){\n      document.getElementById(\"shapeClosed\").style.display = \"inline\";\n      document.getElementById(\"shapeOpenedText\").style.display = \"none\";\n      document.getElementById(\"shapeOpened\").style.display = \"none\";\n    },\n    remainingSetter(str){\n      this.remaining = str;\n    },\n    remainingMembersSetter(str){\n      this.remainingMembers = str;\n    },\n    drawExtra(d){\n      dP.setValues(this.svgHolder, this.svgGHolder, this.remainingSetter, this.dataResult.jsondata, dF.addImportLinks, this.start, this.dataResult.members);\n      dP.drawCurrentPage(d);\n      dM.setValues(this.dataResult.members, this.dataResult.membersFailed, this.remainingMembersSetter, this.dataResult.nodeValidation, \"members\")\n      dM.drawMembers(d);\n      dG.updateSelected(d);\n    },\n    setSVGElements(){\n      if (!this.svgHolder){\n        this.svgHolder =\n        [\n          d3.select(\"#currentPage\")\n          .append(\"svg\")\n          .attr(\"pointer-events\", \"all\")\n        ]\n        this.svgGHolder =\n        [\n          this.svgHolder[0].append(\"g\")\n        ]\n      }\n    }\n\n  }\n\n}\n\n</script>\n\n\n<style>\n#fakeExamples {\n  margin: 0 0 0 0;\n  padding: 1px 0 0 0;\n  text-align: left;\n  list-style-type: none;\n  width: 100%;\n  display: none;\n}\n\n#fakeExamples > li {\n  width: 100%;\n  border-bottom-style: solid;\n  border-left-style: solid;\n  border-right-style: solid;\n  border-width: 1px;\n}\n\n#fakeExamples > li:hover {\n  background-color: #dcdcf7;\n}\n\n#examplesDiv {\n  width: 500px;\n}\n\n#examplesDiv > input {\n  width: 100%;\n  padding: 0 0 0 0;\n  width: 100%;\n  border-bottom-style: solid;\n  border-left-style: solid;\n  border-right-style: solid;\n  border-width: 1px;\n}\n\n#currentPage, #graph, #members, #log {\n  flex-grow: 1;\n  background-color: rgba(0, 0, 0, 0.02);\n  overflow:auto;\n  padding-bottom: 22px;\n}\n\n.resizableContainers {\n  height: 50vh;\n  resize: both;\n  overflow:auto;\n  width: 40%;\n  margin-left: 7%;\n  margin-top: 3.5vh;\n  display: flex;\n  flex-direction: column;\n}\n\n#information {\n  margin: .75em 0 .75em 0;\n  min-height: 10em;\n  list-style-type: none;\n}\n\n#information > p {\n  margin: 0 0 0 0;\n}\n\n.flexContainer {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  width: 98vw;\n  margin-left: calc(-50vw + 430px);\n}\n\n\n#graph > svg > g {\n  cursor: pointer;\n}\n\n#members > details {\n  white-space: pre;\n  margin-bottom: 1.5rem;\n}\n\n.failedMember {\n  color: red;\n}\n\n.spacing {\n  white-space: pre-wrap;\n}\n\nsvg{\n  vertical-align: top;\n}\n\nrect {\n  fill: white;\n  stroke-width: 1.5px;\n}\n\n.tableTextContainer {\n  max-width: 100%;\n  overflow-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: -moz-pre-wrap;\n  white-space: -pre-wrap;\n  white-space: -o-pre-wrap;\n  word-wrap: break-word;\n}\n\ntable {\n  width: 100%;\n  table-layout: fixed;\n  border-collapse: collapse;\n}\n\ntd > button {\n  margin-right: 4px;\n}\n\ntr {\n  overflow-wrap: break-word;\n}\n\ntr:nth-of-type(odd) {\n  background: #eee;\n}\n\nth {\n  background: #333;\n  color: white;\n  font-weight: bold;\n  cursor: s-resize;\n  background-repeat: no-repeat;\n    background-position: 3% center;\n}\n\ntd, th {\n  padding: 6px;\n  border: 1px solid #ccc;\n  text-align: left;\n}\n\nth.des:after {\n  content: \"\\21E9\";\n}\n\nth.aes:after {\n  content: \"\\21E7\";\n}\n\nth {\n  text-align: left;\n  font-weight: bold;\n}\n\n\n@media (max-width: 860px) {\n  .flexContainer {\n    margin-left: 0px;\n    flex-direction: column;\n  }\n\n  .resizableContainers {\n    width: 90%;\n    margin-left: 5%;\n    margin-top: 3.5vh;\n  }\n}\n</style>\n","import rdfDereferencer from \"rdf-dereference\";\nimport 'setimmediate';\n\nconst extractMetadata = require('@treecg/tree-metadata-extraction').extractMetadata\nimport * as N3 from 'n3';\nimport rdfSerializer from \"rdf-serialize\";\nconst streamifyArray = require('streamify-array');\nconst stringifyStream = require('stream-to-string');\n\nconst factory = require('rdf-ext');\nconst ParserN3 = require('@rdfjs/parser-n3');\nconst SHACLValidator = require('rdf-validate-shacl');\n\nconst { DataFactory } = N3;\nconst { namedNode, defaultGraph } = DataFactory;\n\n\n// HOW TO USE\n// Use function onlyValidate(url) when you only wish to validate a single url, wil return a promise with members, membersFailed, nodeValidation, shape_validation, remarks\n// Call function clearData() before (re)using onlyValidate to (re)set all values (including imports)\n// Use function getData(url, ..) when you wish to get all possible information, see below for what gets returned in the promise\n// Use function addImportLinks(data) to add new imports (they will be fetched when either getData or onlyValidate is called)\n// data should be an object in the following the form data={'import': [{'@id':'http...'},{'@id':'http...'}]}\n\n\n// The following variable will be returned in a promise object by getData(urlX)\n// The object will also include 'dereferenced' either true or false, telling you wether or not the url was already dereferenced before and thus nothing got updated\n\n// Main object holding all info needed to draw a graph\n// Will also include nodeURL+'_node' -> {properties}\nvar jsondata = {\"collection\":[], \"links\":new Map(), \"shapes\":[], \"nodes\":[], \"views\":[]};\n// holds all members for all nodes {nodeURL -> Map (memberURL, turtletext)}\nvar members = {};\n// All members that failed shacl validation membersFailed[nodeURL] = [failedMembers]\nvar membersFailed = [];\n// Remarks nodeURL -> remarks\nvar remarks = new Map();\n// The last url that was dereferenced\nexport var data_url = null;\n// Boolean holding if all members passed shacl validation\nvar shape_validation = null;\n// Holds the failure message for every member (it does not include what node a member was linked to)\n// {\"memberIdentifier1\":\"a string containing validation info\", \"memberIdentifier2\":\"a string containing validation info\", ..}\nvar nodeValidation = {};\n// Information about the current collection, see collectionAttributes for what properties can be in this object\nvar collectionStats = {};\n// Holds the label for every link between two nodes, used to look up when drawing the graph\nvar relationLabelMap = new Map();\n// Maps a url onto what that url got redirected to when trying to dereference, happens alot when using ldes streams\n// Map(\"url\", \"final redirect\")\nvar redirectMappings = new Map();\n\n\nvar urlMappings = new Map();\nvar qtext = [];\nvar newImportLinks = new Set();\nvar importedQuads = new Map();\nvar collectionRef = {\"url\":undefined, \"collectionStore\": undefined};\nvar myMetadata;\nvar loaded = new Set();\nvar relations = new Map();\n\n\nexport const shapeTargets = ['targetClass', 'targetNode', 'targetSubjectsOf', 'targetObjectsOf'];\nexport const collectionSpecial = [\"@type\", \"import\", \"importStream\", \"conditionalImport\", \"totalItems\"];\nexport const nodeSpecial = [\"@type\", \"import\", \"importStream\", \"conditionalImport\", \"search\", \"retentionPolicy\"];\nexport const relationSpecial = [\"import\", \"importStream\", \"conditionalImport\"];\n\n\nconst dcterms = 'http://purl.org/dc/terms/';\nconst hydra = 'http://www.w3.org/ns/hydra/core#';\nconst rdf = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#';\nconst shacl = 'http://www.w3.org/ns/shacl#';\nconst rdfs = 'http://www.w3.org/2000/01/rdf-schema#';\nconst tree = 'https://w3id.org/tree#';\nconst ldes = 'https://w3id.org/ldes#';\nconst st = 'http://www.w3.org/ns/shapetrees#';\n\n\nexport const collectionAttributes = new Map([\n  ['Title', dcterms+'title'],\n  ['Creator', dcterms+'creator'],\n  ['Contributor', dcterms+'contributor'],\n  ['Description', dcterms+'description'],\n  ['License', dcterms+'license'],\n  ['Total items', hydra+'totalItems']\n])\n\n\n// Use this function to set the url of a new collection\n// Setting this and then calling getData with url undefined will then clear all data and start a new collection\nexport function setDataUrl(url){\n  data_url = url;\n}\n\n/*\n// DEPRECATED\n// expected arguments: starting url and callBack function for when all possible nodes have been evaluated\n// This function will delete any previous saved data\nexport function validateAll(url, callBack){\n  if (!url){\n    alert(\"Please enter a starting url.\");\n    return;\n  }\n  clearData();\n  const todo = [{\"url\":url, \"imports\":[]}];\n  const done = new Set();\n  validateNext(todo, done, callBack);\n}\n\n\nfunction validateNext(todo, done, callBack){\n  console.log(\"still to be validated: \", JSON.parse(JSON.stringify(todo)));\n  if (todo.length > 0){\n    let next;\n    do {\n      next = todo.shift()\n    } while (todo.size > 0 && done.has(next.url));\n\n\n    if (!done.has(next.url)){\n      var promiseResolve1\n      var p1 = new Promise(function(resolve){\n        promiseResolve1 = resolve;\n      });\n\n      var promiseResolve2\n      var p2 = new Promise(function(resolve){\n        promiseResolve2 = resolve;\n      });\n\n      Promise.all([p1, p2]).then(() => {\n        myMetadata.relations.forEach(v => {\n          todo.push({\"url\":v.node[0]['@id'], \"imports\":getImportLinks(v)})\n        })\n        if (todo.length > 0){\n          validateNext(todo, done, callBack);\n        } else {\n          callBack();\n        }\n      });\n\n      next.imports.forEach(v => newImportLinks.add(v));\n      getData(next.url, promiseResolve1, promiseResolve2);\n      done.add(next.url);\n    } else {\n      callBack();\n    }\n  }\n\n}\n*/\n\n// clears all current data and resets it for a new collection\nexport function clearData(){\n  jsondata = {\"collection\":[], \"links\":new Map(), \"shapes\":[], \"nodes\":[], \"views\":[]};\n  shape_validation = null;\n  nodeValidation = {};\n  members = {};\n  membersFailed = [];\n  newImportLinks = new Set();\n  importedQuads = new Map();\n  remarks = new Map();\n  relationLabelMap = new Map();\n  urlMappings = new Map();\n  redirectMappings = new Map();\n  loaded = new Set();\n  relations = new Map();\n}\n\n\n// Used to check if a relation has an import statement defined right before calling getData()\n// Used to check if a new node has an import statement defined so it gets imported before creating and validating members\n// argument data expects an object and checks for an import and/or conditionalImport property\nexport function addImportLinks(data){\n  getImportLinks(data).forEach(v => newImportLinks.add(v));\n}\n\nfunction getImportLinks(data){\n  let found = new Set();\n  if (data.import){\n    for (let importX of data.import){\n      found.add(importX['@id']);\n    }\n  }\n\n  if (data.conditionalImport){\n    for (let importX of data.conditionalImport.import){\n      found.add(importX['@id']);\n    }\n  }\n  return found;\n}\n\n// Get members by id\nasync function extractId(store, id) {\n  const quadsWithSubj = extractShapeHelp(store, id);\n  const textStream = rdfSerializer.serialize(streamifyArray(quadsWithSubj), { contentType: 'text/turtle' });\n  return await stringifyStream(textStream);\n}\n\n// Get the entire linked shape from the starting id\nasync function extractShapeId(store, id){\n  return await stringifyStream(await extractShape(store, id, false));\n}\n\n// Get the starting id for the shape\nfunction getShapeIds(store){\n  var shapeIds = [];\n  shapeIds = shapeIds.concat(store.getQuads(null, tree+'shape', null, null).map(quad => quad.object.id));\n  shapeIds = shapeIds.concat(store.getQuads(null, st+'validatedBy', null, null).map(quad => quad.object.id));\n  shapeIds = shapeIds.concat(store.getQuads(null, st+'shape', null, null).map(quad => quad.object.id));\n  return shapeIds;\n}\n\n// recursive function to get shape information from the current store\nfunction extractShapeHelp(store, id, checked = []) {\n  var quadsWithSubj = store.getQuads(id, null, null, null);\n  for (let quad of quadsWithSubj){\n    if (quad.object.termType === \"NamedNode\" || quad.object.termType === \"BlankNode\") {\n      if (quad.object.id && !checked.includes(quad.object.id)){\n        checked.push(quad.object.id);\n        quadsWithSubj = quadsWithSubj.concat(extractShapeHelp(store, quad.object.id, checked));\n      }\n    }\n  }\n  return quadsWithSubj;\n}\n\n// Extract the actual shape, 'addTarget' will add a shacl targetting statement if no (implicit) targetting was found\nasync function extractShape(store, id, addTarget = true){\n  return new Promise(function(resolve){\n    const store2 = new N3.Store();\n    var quadsWithSubj = extractShapeHelp(store, id);\n    if (id && quadsWithSubj.length == 0){\n\n      let newq = [];\n      rdfDereferencer.dereference(id)\n      .catch((error) => {\n        if ((\"\"+error).slice(0,23) === \"Error: Error requesting\") {\n          remarks.set(data_url, remarks.get(data_url).concat(\"Error while parsing SHAPE data at:\\n\"+id+\".\\nThis website may not have CORS enabled.\\n\"+error+\"\\n\"));\n        } else {\n          remarks.set(data_url, remarks.get(data_url).concat(\"Error while parsing SHAPE data at:\\n\"+id+\".\\n\"+error+\"\\n\"));\n        }\n\n        return extractShapeNext(store2, quadsWithSubj, id, resolve, addTarget);\n      })\n      .then(v => {\n        v.quads.on('data', (quad) => {newq.push(quad);})\n        .on('error', (error) => {console.error(error); let errM = \"Error while parsing SHAPE data at:\\n\"+id+\".\\n\\n\"+error+\"\\n\"; remarks.set(data_url, remarks.get(data_url).concat(errM)); /*alert(errM);*/})\n        .on('end', () => {\n          store2.addQuads(newq);\n          return extractShapeNext(store2, quadsWithSubj, id, resolve, addTarget);\n        })\n      })\n      .catch(() => {\n        return extractShapeNext(store2, quadsWithSubj, id, resolve, addTarget);\n      });\n    } else {\n      return extractShapeNext(store2, quadsWithSubj, id, resolve, addTarget);\n    }\n  });\n}\n\n// Check for (implicit) targetting, if none found add defaul target all members\nfunction extractShapeNext(store2, quadsWithSubj, id, resolve, addTarget = true){\n  store2.addQuads(quadsWithSubj);\n  var targetQuads = [];\n  for (let tempTarget of shapeTargets){\n    targetQuads = targetQuads.concat(store2.getQuads(null, shacl+tempTarget, null, null))\n  }\n\n  if (targetQuads.length == 0){\n    // This check for implicit targeting\n    let t1 = store2.getQuads(id, rdf+'type', shacl+'NodeShape', null);\n    t1 = t1.concat(store2.getQuads(id, rdf+'type', shacl+'PropertyShape', null));\n    let t2 = store2.getQuads(id, rdf+'type', rdfs+'Class', null);\n\n    // If no target was given for the shape, make it target all tree:member objects\n    if ((t1.length == 0 || t2.length == 0) && addTarget){\n      store2.addQuad(\n        namedNode(id),\n        namedNode(shacl+'targetObjectsOf'),\n        namedNode(tree+'member'),\n        defaultGraph()\n      );\n\n      quadsWithSubj = extractShapeHelp(store2, id);\n    }\n\n  }\n\n  resolve(rdfSerializer.serialize(streamifyArray(quadsWithSubj), { contentType: 'text/turtle' }));\n}\n\n\n\nfunction extractShapeMembers(store, ids){\n  var quadsWithSubj = [];\n  var checked = [];\n  for (let id of ids){\n    quadsWithSubj = quadsWithSubj.concat(store.getQuads(id, null, null, null));\n    // We need quads with a member as object for shacl targetting\n    quadsWithSubj = quadsWithSubj.concat(store.getQuads(null, null, id, null));\n    quadsWithSubj = quadsWithSubj.concat(extractShapeHelp(store, id, checked));\n  }\n  return rdfSerializer.serialize(streamifyArray(quadsWithSubj), { contentType: 'text/turtle' });\n}\n\n\n// this will get the collection from the given url to allow showing extra information like creator, etc\nasync function derefCollection(collectionUrl, collectionCallBack){\n  // This means we do not have to change any data\n  if (collectionRef.url && collectionRef.url == collectionUrl){\n    if(collectionCallBack){\n      collectionCallBack();\n    }\n    return;\n  }\n\n  collectionRef.url = collectionUrl;\n  collectionRef.store = new N3.Store();\n\n  let newq = [];\n  rdfDereferencer.dereference(collectionUrl)\n  .catch((error) => {\n    let errM;\n    if ((\"\"+error).slice(0,23) === \"Error: Error requesting\") {\n      errM = \"Error trying to get the collection root.\\nThis website may not have CORS enabled.\\nWill be unable to provide extra information about the collection.\\n\" + error+\"\\n\";\n    } else {\n      errM = \"Error trying to get the collection root.\\nWill be unable to provide extra information about the collection.\\n\" + error+\"\\n\";\n    }\n\n    remarks.set(data_url, remarks.get(data_url).concat(errM));\n    fallBackNoType();\n    if (collectionCallBack){\n      collectionCallBack();\n    }\n  })\n  .then(v => {\n    v.quads.on('data', (quad) => {newq.push(quad);})\n    .on('error', (error) => {console.error(error); let errM = \"Error while parsing SHAPE data at:\\n\"+collectionUrl+\".\\n\\n\"+error+\"\\n\"; remarks.set(data_url, remarks.get(data_url).concat(errM)); /*alert(errM);*/})\n    .on('end', () => {\n      collectionRef.store.addQuads(newq);\n      parseCollectionTreeData(newq);\n      parseCollection();\n      if (collectionCallBack){\n        collectionCallBack();\n      }\n    })\n  }).catch(() => {\n    fallBackNoType();\n    if (collectionCallBack){\n      collectionCallBack();\n    }\n  });\n\n  function fallBackNoType(){\n    if (!myMetadata.collections || !myMetadata.collections.size > 0 || !Array.from(myMetadata.collections.values())[0]['@type']){\n      // No type property was defined for this collection\n      collectionStats.mainInfo = \"\";\n    }\n  }\n}\n\n\n//TODO still have to get the shape if no shape was defined on current node?\nfunction parseCollectionTreeData(newq){\n  extractMetadata(newq).then(metadata => {\n\n    if (metadata.collections[0] && metadata.collections[0].view){\n      for (let viewNode of metadata.collections[0].view){\n        let double = false;\n        // Check if this view is present on the actual url we followed first\n        // We do not have to check if this view is already present in jsondata.views\n        // because this function will only get called when we have not yet dereferenced this collection\n        // so jsondata.views should at most contain myMetadata.collections[0].view when this gets called\n        if (myMetadata.collections[0] && myMetadata.collections[0].view){\n          for (let checker of myMetadata.collections[0].view){\n            if (checker.name == viewNode['@id']){\n              double = true;\n            }\n          }\n        }\n        if (!metadata.nodes.has(viewNode['@id'])){\n          for (let checker of jsondata.views.concat(jsondata.nodes)){\n            if (checker.name == viewNode['@id']){\n              double = true;\n            }\n          }\n        }\n\n        let node = {};\n        node.id = viewNode['@id']+\"_node\";\n        node.name = viewNode['@id'];\n        node.type = \"View\";\n\n        if (!double && !metadata.nodes.has(viewNode['@id'])){\n          jsondata.views.push(node)\n          mapAddToSet(jsondata.links, collectionRef.url, viewNode['@id']+\"_node\");\n\n        } else if (!double && !myMetadata.nodes.has(viewNode['id'])){\n          viewNode = metadata.nodes.get(viewNode['@id']);\n          jsondata.nodes = jsondata.nodes.filter(element => element.name != viewNode['@id']);\n\n          if(metadata.nodes && metadata.nodes.get(viewNode['@id']) && metadata.nodes.get(viewNode['@id']).relation){\n            node.relation_count = metadata.nodes.get(viewNode['@id']).relation.length;\n          } else {\n            node.relation_count = 0;\n          }\n\n          for (let pAttr of nodeSpecial){\n            if (viewNode[pAttr]){\n              node[pAttr] = viewNode[pAttr];\n            }\n          }\n\n          jsondata.views.push(node)\n          mapAddToSet(jsondata.links, collectionRef.url, viewNode['@id']+\"_node\");\n        }\n      }\n    }\n  })\n}\n\n// This 'parses' the actual info from the dereferenced collection\nfunction parseCollection(collectionCallBack){\n  if (!myMetadata.collections || !myMetadata.collections.size > 0 || !Array.from(myMetadata.collections.values())[0]['@type']){\n    let typeX = Array.from(collectionRef.store.getQuads(collectionRef.url, rdf+'type', null, null).map(quad => quad.object.id))[0];\n    if (typeX){\n      collectionStats.mainInfo = \"Collection type: \" + typeX + \"\\n\";\n    } else {\n      // No type property was defined for this collection.\n      collectionStats.mainInfo = \"\";\n    }\n  }\n  collectionStats.attributes = {};\n  for (let [key, value] of collectionAttributes){\n    let attrX = collectionRef.store.getQuads(collectionRef.url, value, null, null).map(quad => quad.object.id);\n    if (attrX.length == 1){\n      collectionStats.attributes[key] = attrX[0];\n    } else if (attrX.length > 0){\n      collectionStats.attributes[key] = JSON.stringify(attrX);\n    }\n  }\n  if(collectionCallBack){\n    collectionCallBack();\n  }\n}\n\n\n// give a url to validate, url should include tree:member and tree:shape definitions\n// this function will automatically fetch all needed imports;\n// This is meant to be a standalone functionality -> calls getImportsAndMembers() which then calls validateShape()\nexport async function onlyValidate(url){\n  let newq = [];\n\n  var promiseResolve1\n  var p1 = new Promise(function(resolve){\n    promiseResolve1 = resolve;\n  });\n\n  rdfDereferencer.dereference(url)\n  .catch((error) => {\n    console.error(error);\n    promiseResolve1();\n  })\n  .then(v => {\n  v.quads.on('data', (quad) => {newq.push(quad);})\n  .on('error', (error) => {console.error(error);promiseResolve1();return;})\n  .on('end', () => {\n    extractMetadata(qtext).then(metadata => {\n      const store = new N3.Store(qtext);\n      for (var collectionId of metadata.collections.keys()) {\n        var collectionObj = metadata.collections.get(collectionId);\n        getImportsAndMembers(metadata, store, collectionObj, promiseResolve1);\n      }\n    });\n  })})\n  .catch((e) => {\n    console.error(\"Failed while parsing.\\n\"+e);\n    promiseResolve1();\n  });\n\n  var promiseResolveResult;\n  var promiseResult = new Promise(function(resolve){\n    promiseResolveResult = resolve;\n  });\n\n  p1.then(() => {\n    promiseResolveResult({\n      nodeValidation,\n      members,\n      membersFailed,\n      remarks,\n      shape_validation\n    })\n  })\n\n  return promiseResult;\n}\n\n\n\nfunction mapAddToSet(myMap, myKey, myValue){\n  if (myMap.has(myKey)){\n    myMap.get(myKey).add(myValue);\n  } else {\n    myMap.set(myKey, new Set([myValue]));\n  }\n}\n\n\nfunction mapDeleteAll(myMap, myValue){\n  myMap.delete(myValue);\n  for (let vX of myMap.values()){\n    vX.delete(myValue);\n  }\n}\n\n\n\n// pass a url to add a new node OR set data_url to go to a new collection\n// presence of url variable will get checked BEFORE data_url and thus data_url gets ignored if url is not undefined\n// Will return a promise with a giant object containing all needed objects, check at the top for more details on all included properties\nexport async function getData(urlX) {\n  // Function will call three different asyncs later on\n  var promiseResolve1;\n  var p1 = new Promise(function(resolve){\n    promiseResolve1 = resolve;\n  });\n  var promiseResolve2;\n  var p2 = new Promise(function(resolve){\n    promiseResolve2 = resolve;\n  });\n  var promiseResolve3;\n  var p3 = new Promise(function(resolve){\n    promiseResolve3 = resolve;\n  });\n\n  qtext = [];\n  let dereferenced = true;\n\n\n  var promiseResolveResult;\n  var promiseResult = new Promise(function(resolve){\n    promiseResolveResult = resolve;\n  });\n  Promise.all([p1, p2, p3]).then(() =>\n    promiseResolveResult({\n      jsondata,\n      members,\n      membersFailed,\n      remarks,\n      data_url,\n      shape_validation,\n      nodeValidation,\n      collectionStats,\n      relationLabelMap,\n      redirectMappings,\n      dereferenced\n    })\n  );\n\n\n\n\n  function stopped(){\n    promiseResolve1();\n    promiseResolve2();\n    promiseResolve3();\n  }\n\n  if(urlX){\n    data_url = urlX;\n  } else if (data_url){\n    // This means user gave a url for a new collection so we need to clear whatever data we already had\n    clearData();\n  } else {\n    //Fallback\n    alert(\"No starting point defined.\")\n    clearData();\n    stopped();\n  }\n\n  if (loaded.has(data_url)){\n    stopped();\n    dereferenced = false;\n    return promiseResult;\n  }\n  if (redirectMappings.has(data_url) && loaded.has(redirectMappings.get(data_url))){\n    stopped();\n    dereferenced = false;\n    return promiseResult;\n  }\n\n  // console.log(\"fetching \", data_url);\n  remarks.set(data_url, \"\");\n\n  const {quads, url} = await rdfDereferencer.dereference(data_url).catch(error => {\n    if ((\"\"+error).slice(0,23) === \"Error: Error requesting\") {\n      alert(\"This website may not have CORS enabled.\\n\"+error);\n    } else {\n      alert(error);\n    }\n  });\n  urlMappings.set(url, data_url);\n  quads.on('data', (quad) => {qtext.push(quad);})\n  .on('error', (error) => {console.error(error); let errM = \"Error while parsing data at:\\n\"+data_url+\".\\n\\n\"+error+\"\\n\";remarks.set(data_url, remarks.get(data_url).concat(errM)); /*alert(errM);*/})\n  .on('end', () => {\n    extractMetadata(qtext).then(metadata => {\n      // console.log(\"metadata:\");\n      // console.log(metadata);\n\n      loaded.add(url);\n\n      if (data_url != url){\n        redirectMappings.set(data_url, url);\n      }\n\n      // This removes 'fake' nodes where the actual node is a redirect\n      if (redirectMappings.has(data_url)){\n        jsondata.nodes = jsondata.nodes.filter(element => element.name != data_url && !redirectMappings.has(element.name));\n        mapDeleteAll(jsondata.links, data_url+\"_node\");\n      }\n\n\n      myMetadata = metadata;\n      const store = new N3.Store(qtext)\n\n      // Having more than one collection is not supported but we can still try drawing a graph\n      if (metadata.collections.size > 1){\n        let errorText = \"\";\n        errorText += \"Warning: found multiple collections. This is not supported.\\n\";\n        errorText += JSON.stringify(Array.from(metadata.collections.entries()), null, '/t');\n        errorText += \"\\ncheck tree:view, hydra:view, void:subset, dct:isPartOf, as:partOf.\";\n        errorText += \"\\nOther causes: \\nmembers/shape are linked not to the collection but the node.\";\n        errorText += \"\\ncheck tree:member, hydra:member, as:items, ldp:contains.\";\n        errorText += \"Will try creating a graph using only the first collection.\\n\"\n        remarks.set(data_url, remarks.get(data_url).concat(errorText + \"\\n\"));\n        alert(errorText);\n      }\n\n\n      // If no 'new' collection was found, we might already have a collection stored\n      if (metadata.collections.size == 0){\n        if (jsondata.collection.length == 0){\n          let errM = \"No collection pre-defined and no collection found at \" + data_url + \".\\nPlease provide a different starting URL.\\n\";\n          remarks.set(data_url, remarks.get(data_url).concat(errM));\n          alert(errM);\n          stopped();\n          return promiseResult;\n        }\n\n        if (!jsondata[data_url+\"_node\"] && !jsondata[url+\"_node\"]){\n          jsondata[data_url+\"_node\"] = [];\n          let errM = \"No collection metadata found at \" + data_url + \".\\nWill add an empty node for this URL.\\n\";\n          remarks.set(data_url, remarks.get(data_url).concat(errM));\n          jsondata.nodes = jsondata.nodes.filter(element => element.name != data_url);\n          jsondata.nodes.push({\"id\":data_url+\"_node\", \"name\":data_url, \"relation_count\":0, \"type\":\"Node\"})\n        }\n      }\n\n\n      collectionStats.rootInfo = \"\";\n      if (metadata.collections.size == 0){\n        // avoid never calling these, callback() will be called after trying to check shape aswell\n        promiseResolve2();\n        promiseResolve3();\n      } else if (data_url != Array.from(metadata.collections.keys())[0]){\n        let collectionUrl = Array.from(metadata.collections.keys())[0];\n        derefCollection(collectionUrl, promiseResolve3);\n      } else {\n        collectionStats.rootInfo = \"Your IRI points towards the root of this collection.\\n\";\n        collectionRef.url = data_url;\n        collectionRef.store = new N3.Store(qtext);\n        parseCollection(promiseResolve3);\n      }\n\n      // The main data parsing part, for loop to avoid throwing an undefined error\n      // Maybe add support for multiple collections later?\n      for (var collectionId of metadata.collections.keys()) {\n        var collectionObj = metadata.collections.get(collectionId);\n\n        if (collectionObj['@type']){\n          collectionStats.mainInfo = \"Collection type: \" + collectionObj['@type'][0] + \"\\n\";\n          if (collectionObj['@type'][0] == ldes+\"EventStream\"){\n            collectionStats.mainInfo += \"This is an LDES event stream, all members are immutable\";\n          }\n        }\n\n        // If we did not have a collection stored already add it to jsondata.collection\n        if (jsondata.collection.length == 0){\n          parseNewCollection(collectionId, collectionObj);\n        } else if (testDoubleCollection(collectionId)){\n          stopped();\n          return promiseResult;\n        }\n\n\n        // Create view 'nodes' found at the current url this includes nodes not yet dereferenced\n        parseViewNodes(collectionObj, metadata, collectionId);\n\n        //Create regular nodes found at the current url, also try and fill any empty view nodes\n        parseRegularNodes(collectionObj, metadata, collectionId);\n\n        //Get the data behind all needed import statements then collect all members then call validator function\n        getImportsAndMembers(metadata, store, collectionObj, promiseResolve2);\n      }\n\n      // This does not need a duplicate check since old node relations won't be included in the new metadata\n      // or they will just overwrite with newer data if the node was already present\n      for (var nodeId of metadata.nodes.keys()){\n        // Since we might be overwriting, delete old links for this node if already existed to avoid double linking\n        jsondata.links.delete(nodeId+\"_node\");\n        var nodeObj = metadata.nodes.get(nodeId);\n        jsondata[nodeId+\"_node\"] = [];\n        for (var relation of nodeObj.relation){\n          jsondata[nodeId+\"_node\"].push({\"id\":relation['@id'], \"name\":relation['@id']});\n        }\n      }\n\n      // This will loop through new nodes and add their relations with their attributes\n      // This will also link the new nodes to old nodes and vice versa\n      parseRelationsAndLinks(metadata);\n\n      // console.log(\"jsondata:\");\n      // console.log(jsondata);\n\n      // TODO shape is defined on the collection so shape is never allowed to change\n      // Currently we just ignore new shapes instead of checking if they are correct compared to the original\n      if (jsondata.shapes.length == 0 && metadata.collections.get(collectionId).shape){\n        const shapeIds = getShapeIds(store);\n\n        extractShapeId(store, shapeIds[0]).then(res => {\n          jsondata.shapes.push({\"id\":shapeIds[0], \"type\":\"shape\", \"shape_extra\":res});\n          mapAddToSet(jsondata.links, collectionId, shapeIds[0]);\n          newImportLinks = new Set();\n          promiseResolve1();\n        });\n\n      } else {\n        newImportLinks = new Set();\n        promiseResolve1();\n      }\n    })\n\n  });\n  return promiseResult;\n\n}\n\n\nfunction testDoubleCollection(collectionId){\n  // If we already had a collection stored, check to make sure the 'new' one is the same as the old one\n  let double = false;\n  if (jsondata.collection.length > 0){\n    for (let checker of jsondata.collection){\n      if (checker.id != collectionId){\n        double = true;\n      }\n    }\n  }\n\n\n  // If the new collection is not the same throw an error\n  if (double){\n    let errorText = \"\";\n    errorText += \"Warning: new node is linked to a different collection. This is not supported.\";\n    errorText += '\\n' + \"current URL: \" + data_url;\n    errorText += '\\n' + \"new collection: \" + collectionId;\n    errorText += '\\n' + \"original collection: \" + jsondata.collection[0].id;\n    remarks.set(data_url, remarks.get(data_url).concat(errorText+\"\\n\"));\n    alert(errorText);\n  }\n  return double;\n}\n\n\nfunction parseNewCollection(collectionId, collectionObj){\n  let collection = {};\n  collection.id = collectionId;\n  collection.type = \"Collection\";\n  collection.vocab = collectionObj['@context'][\"@vocab\"];\n\n  for (let pAttr of collectionSpecial){\n    if (collectionObj[pAttr]){\n      collection[pAttr] = collectionObj[pAttr];\n    }\n  }\n\n  jsondata.collection.push(collection);\n}\n\n\nfunction parseRelationsAndLinks(metadata){\n  let tempN = [];\n  let tempN2 = [];\n  let tempNMapping = new Map();\n  // If metadata.nodes had no new node, a new empty node still got added to the graph\n  // Need to ensure a link for all relations leading to this node is also created via data_url_node\n  let it = metadata.nodes.keys();\n  if (metadata.nodes.size == 0){\n    it = [data_url];\n\n    jsondata.links.delete(data_url +\"_node\");\n    jsondata[data_url +\"_node\"] = [];\n  }\n  for (let nodeName of it){\n    let nodeId = nodeName + \"_node\"\n    //This will hold all newly added nodes to later check if they conform to any already existing relations\n    tempN.push(nodeId);\n    if(urlMappings.has(nodeName)){\n      tempNMapping.set(urlMappings.get(nodeName)+\"_node\", nodeId);\n      tempN2.push(urlMappings.get(nodeName)+\"_node\");\n    }\n    jsondata[nodeId].remainingItems = 0;\n    for (var relationJson of jsondata[nodeId]){\n      if (metadata.relations.get(relationJson.id)){\n        parseRelationsAndLinksHelper(relationJson, metadata, nodeId, nodeName);\n      }\n    }\n\n    AddNewLinks(tempN, tempN2, tempNMapping);\n  }\n}\n\n\nfunction parseRelationsAndLinksHelper(relationJson, metadata, nodeId, nodeName){\n  var relationObj = metadata.relations.get(relationJson.id);\n  if (!relationObj.node || !relationObj.node[0]['@id']){\n    let errM = \"Error: relation from \" + nodeId + \" has no node defined!\\nThis is not allowed!\\nRelation: \" + JSON.stringify(relationObj, null, '\\t') + \"\\n\\n\";\n    remarks.set(data_url, remarks.get(data_url).concat(errM));\n    return;\n  }\n\n  // This autoadds all relation-> nodes to the graph\n  if (jsondata.nodes.every(element => element.name != relationObj.node[0][\"@id\"] && !urlMappings.has(relationObj.node[0][\"@id\"]))){\n    jsondata.nodes.push({\"id\":relationObj.node[0][\"@id\"]+\"_node\", \"name\":relationObj.node[0][\"@id\"]});\n    mapAddToSet(jsondata.links, nodeId, relationObj.node[0][\"@id\"]+\"_node\");\n  }\n\n\n\n  relationJson.node = relationObj.node;\n\n  mapAddToSet(relations, nodeId, relationObj.node[0]['@id']+\"_node\");\n\n  if(!relationObj['@type']){\n    remarks.set(data_url, remarks.get(data_url).concat(\"relation from \" + nodeName + \" to \" + relationObj.node[0]['@id'] + \" has no type defined\\n\"));\n  } else {\n    relationJson.type = relationObj['@type'];\n  }\n\n  if (relationObj[\"remainingItems\"]){\n    jsondata[nodeId].remainingItems += Number(relationObj[\"remainingItems\"][0][\"@value\"]);\n  }\n\n  let wantedAttrs = [\"path\", \"value\", \"remainingItems\"];\n  for (let wAttr of wantedAttrs){\n    if (relationObj[wAttr]){\n      relationJson[wAttr] = relationObj[wAttr];\n    } else if (wAttr != \"remainingItems\"){\n      remarks.set(data_url, remarks.get(data_url).concat(\"relation from \" + nodeName + \" to \" + relationObj.node[0]['@id'] + \" has no \" + wAttr + \" defined\\n\"));\n    }\n  }\n\n  createLinkLabels(relationObj, nodeId);\n\n  for (let pAttr of relationSpecial){\n    if (relationObj[pAttr]){\n      relationJson[pAttr] = relationObj[pAttr];\n    }\n  }\n\n  //This checks if the node this relation links to already exists in the graph\n  if(jsondata[relationObj.node[0]['@id']+\"_node\"]){\n    mapAddToSet(jsondata.links, nodeId, relationObj.node[0]['@id']+\"_node\");\n  }\n\n  if(urlMappings.has(relationObj.node[0]['@id']) && jsondata[urlMappings.get(relationObj.node[0]['@id'])+\"_node\"]){\n    mapAddToSet(jsondata.links, nodeId, urlMappings.get(relationObj.node[0]['@id'])+\"_node\");\n  }\n}\n\n// create a label for every possible link, no matter if it actually exists or not\nfunction createLinkLabels(relationObj, nodeId){\n  if (relationObj[\"value\"]){\n    let vT = \"\";\n    for (let vX of relationObj[\"value\"]){\n      vT += vX[\"@value\"] + \", \";\n    }\n    vT = vT.slice(0,-2);\n    if (relationObj[\"@type\"] && relationObj[\"@type\"][0]){\n      relationLabelMap.set(nodeId + relationObj.node[0]['@id']+\"_node\", relationObj[\"@type\"][0].split('#')[1] + \" \" + vT);\n    } else {\n      relationLabelMap.set(nodeId + relationObj.node[0]['@id']+\"_node\", \"relation: \" + vT);\n    }\n  } else if (relationObj[\"@type\"] && relationObj[\"@type\"][0]){\n    relationLabelMap.set(nodeId + relationObj.node[0]['@id']+\"_node\", relationObj[\"@type\"][0].split('#')[1]);\n  }\n}\n\n\nfunction AddNewLinks(tempN, tempN2, tempNMapping){\n  //This checks if any of the newly added nodes are the target of a relation already on the graph\n  for (let [tempKey, tempSet] of relations){\n    for (let tempValue of tempSet){\n      if (tempN.includes(tempValue)){\n        mapAddToSet(jsondata.links, tempKey, tempValue);\n      } else if (tempN2.includes(tempValue)){\n        mapAddToSet(jsondata.links, tempKey, tempNMapping.get(tempValue));\n      }\n    }\n  }\n}\n\n\n\nfunction parseRegularNodes(collectionObj, metadata, collectionId){\n  // view 'nodes' have been added, now add the actual nodes\n  // Also checks if a new node is already a 'view', if so, replace it in view\n  // the original in view was either the same full node or an empty view that got found but not dereferenced\n  // -> important notice a node can be in both .subset and .view if both attributes were defined\n  let iter = [];\n  if (collectionObj.subset){\n    iter = iter.concat(collectionObj.subset);\n  }\n  if (metadata.nodes){\n    iter = iter.concat(Array.from(metadata.nodes.values()));\n  }\n\n  if (collectionObj.subset || metadata.nodes){\n    for (let viewNode of iter){\n      if (metadata.nodes.has(viewNode['@id'])){\n        viewNode = metadata.nodes.get(viewNode['@id']);\n      }\n\n      let node = {};\n      node.id = viewNode['@id']+\"_node\";\n      node.name = viewNode['@id'];\n\n      if(metadata.nodes && metadata.nodes.get(viewNode['@id']) && metadata.nodes.get(viewNode['@id']).relation){\n        node.relation_count = metadata.nodes.get(viewNode['@id']).relation.length;\n      } else {\n        node.relation_count = 0;\n      }\n\n      for (let pAttr of nodeSpecial){\n        if (viewNode[pAttr]){\n          node[pAttr] = viewNode[pAttr];\n        }\n      }\n\n      let found = false;\n      jsondata.views = jsondata.views.filter(v => {\n        if (v.name == node.name){\n          found = true;\n        }\n        return v.name != node.name;\n      })\n\n      if (found){\n        node.type = \"View\";\n        jsondata.views.push(node);\n        mapAddToSet(jsondata.links, collectionId, viewNode['@id']+\"_node\");\n      } else {\n        jsondata.nodes = jsondata.nodes.filter(element => element.name != viewNode['@id']);\n        node.type = \"Node\";\n        jsondata.nodes.push(node);\n      }\n\n    }\n  }\n}\n\n\n\nfunction parseViewNodes(collectionObj, metadata, collectionId){\n  if (collectionObj.view){\n    for (let viewNode of collectionObj.view){\n      let double = false;\n      if (!metadata.nodes.has(viewNode['@id'])){\n        for (let checker of jsondata.views.concat(jsondata.nodes)){\n          if (checker.name == viewNode['@id']){\n            double = true;\n          }\n        }\n      }\n\n      let node = {};\n      node.id = viewNode['@id']+\"_node\";\n      node.name = viewNode['@id'];\n      node.type = \"View\";\n\n      if (!double && !metadata.nodes.has(viewNode['@id'])){\n        if(data_url == node.name){\n          node.relation_count = 0;\n        }\n        jsondata.views.push(node)\n        mapAddToSet(jsondata.links, collectionId, viewNode['@id']+\"_node\");\n\n      } else if (!double){\n        viewNode = metadata.nodes.get(viewNode['@id']);\n        jsondata.nodes = jsondata.nodes.filter(element => element.name != viewNode['@id']);\n\n        if(metadata.nodes && metadata.nodes.get(viewNode['@id']) && metadata.nodes.get(viewNode['@id']).relation){\n          node.relation_count = metadata.nodes.get(viewNode['@id']).relation.length;\n        } else {\n          node.relation_count = 0;\n        }\n\n        for (let pAttr of nodeSpecial){\n          if (viewNode[pAttr]){\n            node[pAttr] = viewNode[pAttr];\n          }\n        }\n\n        jsondata.views.push(node)\n        mapAddToSet(jsondata.links, collectionId, viewNode['@id']+\"_node\");\n      }\n    }\n  }\n}\n\n\nfunction getImportsAndMembers(metadata, store, collectionObj, fix = function(){return;}){\n  // get all imports & afterwards start shacl validation\n  if(metadata.nodes && metadata.nodes.size > 0){\n    for (let myNode of metadata.nodes.values()){\n      addImportLinks(myNode);\n    }\n    var newNodeMembersId = [];\n    if (metadata.nodes.size > 0){\n      newNodeMembersId = Array.from(metadata.nodes.keys());\n    } else {\n      newNodeMembersId = [data_url];\n    }\n    for (let mId of newNodeMembersId){\n      members[mId] = new Map();\n    }\n\n    importedQuads.forEach((v,k) => {\n      if (newImportLinks.has(k)){\n        store.addQuads(v);\n      }\n      newImportLinks.delete(k);\n    });\n\n    const importPromises = [...newImportLinks].map(url => new Promise((resolve, reject) => {\n      let newQuads = [];\n      rdfDereferencer.dereference(url)\n      .catch((e) => {\n        console.error(e);\n        resolve();\n      })\n      .then(v => {v.quads.on('data', (quad) => {newQuads.push(quad)})\n        .on('error', (error) => {console.error(error); let errM = \"Error while parsing import data at:\\n\"+url+\"\\n\\n\" +error+\"\\n\"; remarks.set(data_url, remarks.get(data_url).concat(errM));/*alert(errM); */reject()})\n        .on('end', () => {\n          importedQuads.set(url, newQuads);\n          store.addQuads(newQuads);\n          resolve();\n        })\n      }).catch((e) => {\n        console.error(e);\n        resolve();\n      })\n    }))\n\n    Promise.all(importPromises).then(() => {\n      if (collectionObj.member){\n        let membIds = [];\n\n        const memberPromises = collectionObj.member.map(m =>\n          new Promise((resolve) => {\n            membIds.push(m['@id']);\n            extractId(store, m['@id']).then(mtemp => {\n              for (let mId of newNodeMembersId){\n                members[mId].set(m['@id'], mtemp);\n              }\n              resolve();\n            })\n          })\n        );\n\n        Promise.all(memberPromises)\n        .catch((e) => {\n          console.error(e);\n          fix()\n        })\n        .then(() => {\n          validateShape(membIds, store, newNodeMembersId, fix);\n        }).catch(() => fix());\n\n      } else {\n        remarks.set(data_url, remarks.get(data_url).concat(\"Found no members at \" + data_url + \".\\n\"));\n        fix();\n      }\n    });\n  } else {\n    fix();\n  }\n}\n\n\nasync function loadDatasetX (stream) {\n  const parser = new ParserN3({ factory });\n  return factory.dataset().import(parser.import(await stream));\n}\n\n\n// This function will extract members & shapes independently, it only needs member Ids and a store\nasync function validateShape(membIds, store, newNodeMembersId, fix){\n  for (let mId of newNodeMembersId){\n    membersFailed[mId] = [];\n    nodeValidation[mId] = {};\n  }\n\n  const shapeIds = getShapeIds(store);\n\n  if (shapeIds.size > 1){\n    let errM = \"Found multiple shapes, will only validate using the first one.\\n\" + JSON.stringify(shapeIds);\n    remarks.set(data_url, remarks.get(data_url).concat(errM));\n  }\n  if (shapeIds.size == 0){\n    remarks.set(data_url, remarks.get(data_url).concat(\"URL did not include a shacl shape given via tree:shape or st:validatedBy.\\n\"));\n    fix();\n    return;\n  }\n\n  const shapesX = extractShape(store, shapeIds[0]);\n  const dataX = extractShapeMembers(store, membIds);\n\n\n  loadDatasetX(shapesX).then(shapes => {\n    loadDatasetX(dataX).then(data => {\n      // This makes it so the BlankNode identifiers here are the same as those shown in the shape\n      let dtX = [];\n      for (let sX of shapes){\n        if (sX.object.termType == \"BlankNode\" && !dtX.includes(sX.object.value)){\n          sX.object.value = sX.object.value.slice(3);\n          dtX.push(sX.object.value)\n        }\n        if (sX.subject.termType == \"BlankNode\" && !dtX.includes(sX.subject.value)){\n          sX.subject.value = sX.subject.value.slice(3);\n          dtX.push(sX.subject.value)\n        }\n      }\n\n      const validator = new SHACLValidator(shapes, { factory });\n      const report = validator.validate(data);\n\n      if (shape_validation && shape_validation === false){\n        shape_validation = false;\n      } else {\n        shape_validation = report.conforms;\n      }\n\n      for (const result of report.results) {\n        // See https://www.w3.org/TR/shacl/#results-validation-result for details about each property\n        let mX = \"\";\n\n        mX += \"\\nmessage: \\n\";\n        for (let mt of result.message){\n          mX += \"\\t\" + mt['value']+\"\\n\";\n        }\n        mX += \"path: \" + result.path['value'] + \"\\n\";\n        mX += \"focusNode: \" + result.focusNode['value'] + \"\\n\";\n\n        mX += \"severity: \" + result.severity['value'] + \"\\n\";\n        mX += \"sourceConstraintComponent: \" + result.sourceConstraintComponent['value'] + \"\\n\";\n        mX += \"sourceShape: \" + result.sourceShape['value'] + \"\\n\";\n\n        for (let mId of newNodeMembersId){\n          membersFailed[mId].push(result.focusNode['value']);\n          if (result.focusNode && result.focusNode['value']){\n            nodeValidation[mId][result.focusNode['value']] = mX;\n          }\n        }\n\n      }\n\n      fix();\n    }).catch((e) => {\n      console.error(\"Error with members while validating\\n\"+e);\n      fix();\n    });\n  }).catch((e) => {\n    console.error(\"Error with shape while validating\\n\"+e);\n    fix();\n  });\n\n}\n","import {nodeSpecial, relationSpecial} from './dataFunctions.js'\n\nvar svgHolder;\nvar svgGHolder;\nvar remainingSetter;\nvar jsondata;\nvar addImportLinks;\nvar start;\nvar members;\nvar svgE;\nvar svgEG;\nvar offH;\nvar tt;\n\nexport function setValues(_svgHolder, _svgGHolder, _remainingSetter, _jsondata, _addImportLinks, _start, _members){\n  svgHolder = _svgHolder;\n  svgGHolder = _svgGHolder;\n  remainingSetter = _remainingSetter;\n  jsondata = _jsondata;\n  addImportLinks = _addImportLinks;\n  start = _start;\n  members = _members;\n}\n\n// Now that this is separate from the actual graph this should be changed to plain HTML and not use svg's & d3 stuff.\n\nexport function drawCurrentPage(d){\n  svgE = svgHolder[0];\n  svgEG = svgGHolder[0];\n\n  svgGHolder[0].selectAll(\"g\").remove();\n  remainingSetter(undefined);\n  if (jsondata[d.id] && jsondata[d.id].remainingItems > 0){\n    remainingSetter(\"Remaining items identified via relation properties for selected resource: \" + jsondata[d.id].remainingItems + \".\\n\");\n  }\n\n  var newG;\n\n  if (d.relation_count !== undefined){\n    newG = svgEG.append(\"g\").attr(\"class\", \"new_g\");\n    tt = newG.append(\"text\");\n    expandRelationHolderNodeInfo.call(this, d, tt);\n  }\n\n  if (d.relation_count && d.relation_count > 0){\n    expandRelationHolder.call(this, d, tt, newG);\n  }\n\n  if (d.relation_count !== undefined){\n    // Make the main svg holding this large enough to show everything\n    let bbox = svgEG.node().getBBox();\n    svgE.attr(\"viewBox\", \"0,0,\"+(bbox.width+bbox.x)+\",\"+(bbox.height+bbox.y))\n    .attr(\"width\", (bbox.width+bbox.x))\n    .attr(\"height\", (bbox.height+bbox.y));\n  }\n}\n\nexport function updateWidth(width){\n  if (document.getElementById(\"currentPageTableHolder\")){\n\n    document.getElementById(\"currentPageTableHolder\").setAttribute(\"width\", width-60);\n    let newHeight = document.getElementById(\"currentPageTable\").offsetHeight;\n    document.getElementById(\"currentPageTableHolder\").setAttribute(\"height\", newHeight);\n\n    let bbox = svgEG.node().getBBox();\n    svgE.attr(\"viewBox\", \"0,0,\"+(bbox.width+bbox.x)+\",\"+(bbox.height+bbox.y))\n    .attr(\"width\", (bbox.width+bbox.x))\n    .attr(\"height\", (bbox.height+bbox.y));\n  }\n}\n\n\n\nfunction expandRelationHolder(d, tt, newG){\n  offH = tt.node().getBBox().height + 30;\n  let widthBox = document.getElementById('currentPage').getBoundingClientRect().width;\n  let innerg = newG.append(\"svg:foreignObject\")\n  .attr(\"id\", \"currentPageTableHolder\")\n  .attr(\"x\", 22)\n  .attr(\"y\", offH)\n  .attr(\"width\", widthBox-60)\n  .attr(\"height\", 600);\n\n  var table = innerg.append('xhtml:table').attr(\"id\", \"currentPageTable\");\n  var thead = table.append('thead');\n  var\ttbody = table.append('tbody').attr(\"id\", \"my_tbody\");\n\n  var tableColumns = [\"type\", \"value\", \"path\"];\n  var tableData = parseTableData.call(this, d);\n\n  let theadRow = thead.append('tr');\n  // append the header row\n  theadRow.selectAll('th')\n  .data(tableColumns).enter()\n  .append('th')\n  .text(function (column) { return column; });\n\n  theadRow.append('th').text(\"\");\n\n\n  tbody = document.getElementById(\"my_tbody\")\n\n  let count = 0;\n  for (let dataX of tableData){\n    let trX = tbody.insertRow();\n    trX.id = \"small\"+count;\n\n    for(let valueX of Object.values(dataX)){\n      let textX = document.createTextNode(valueX);\n      let tdX = trX.insertCell();\n      tdX.appendChild(textX);\n    }\n\n    let tdX = trX.insertCell();\n    let btnExpand = document.createElement(\"button\");\n    btnExpand.onclick = tableClick.bind(this, count, jsondata[d.id][count], newG, innerg, table, true);\n    btnExpand.innerHTML = \"Expand\"\n    tdX.appendChild(btnExpand);\n    let btnFollow = document.createElement(\"button\");\n    btnFollow.innerHTML = \"Follow\"\n    btnFollow.setAttribute(\"count\", count);\n    btnFollow.onclick = function(){\n      addImportLinks(jsondata[d.id][this.getAttribute(\"count\")]);\n      start(jsondata[d.id][this.getAttribute(\"count\")].node[0][\"@id\"]);\n    };\n    tdX.appendChild(btnFollow);\n\n    trX = tbody.insertRow();\n    trX.style.visibility = \"collapse\";\n    trX.id = \"large\"+count;\n\n    let textX = document.createTextNode(createExtraCell.call(this, jsondata[d.id][count]));\n    let containerDiv = document.createElement(\"div\");\n    containerDiv.classList.add('tableTextContainer');\n    containerDiv.appendChild(textX);\n\n    tdX = trX.insertCell();\n    tdX.classList.add('spacing');\n    tdX.colSpan = tableColumns.length + 1;\n    tdX.appendChild(containerDiv);\n\n    let btnCollapse = document.createElement(\"button\");\n    btnCollapse.onclick = tableClick.bind(this, count, jsondata[d.id][count], newG, innerg, table, false);\n    btnCollapse.innerHTML = \"Collapse\"\n    tdX.appendChild(btnCollapse);\n    let btnFollowC = document.createElement(\"button\");\n    btnFollowC.innerHTML = \"Follow\"\n    btnFollowC.setAttribute(\"count\", count);\n    btnFollowC.onclick = function(){\n      addImportLinks(jsondata[d.id][this.getAttribute(\"count\")]);\n      start(jsondata[d.id][this.getAttribute(\"count\")].node[0][\"@id\"]);\n    };\n    tdX.appendChild(btnFollowC);\n\n    count++;\n  }\n\n  let bboxT = table.node();\n  innerg.attr(\"width\", bboxT.offsetWidth).attr(\"height\", bboxT.offsetHeight);\n}\n\nfunction expandRelationHolderNodeInfo(d, tt){\n  tt.append(\"tspan\").text(d.type)\n  .attr(\"dy\", 22)\n  .attr(\"dx\",5);\n\n  tt.append(\"tspan\").text(function(){\n    if (d.name.length > 70){\n      return d.name.slice(0,45)+\"...\"+d.name.slice(-15);\n    }\n    return d.name\n  })\n  .attr(\"dy\", 22)\n  .attr(\"x\",0)\n  .attr(\"dx\",5)\n  .on(\"click\", function(){navigator.clipboard.writeText(d.name);})\n  .append(\"title\").text(\"Click to copy link\\n\" + d.name);\n\n  tt.append(\"tspan\").text(\"relations: \" + d.relation_count)\n  .attr(\"dy\", 22)\n  .attr(\"x\",0)\n  .attr(\"dx\",15);\n\n  let totalMembers = 0;\n  if(members[d.name] && members[d.name].size > 0) {\n    totalMembers = members[d.name].size;\n  }\n\n  tt.append(\"tspan\").text(\"members: \" + totalMembers)\n  .attr(\"dy\", 22)\n  .attr(\"x\",0)\n  .attr(\"dx\",15);\n\n  for (let pAttr of nodeSpecial){\n    if (d[pAttr]){\n      tt.append(\"tspan\").text(`${pAttr}:`)\n      .attr(\"dy\", 22)\n      .attr(\"x\",0)\n      .attr(\"dx\",5);\n      for (const value of Object.values(d[pAttr])) {\n        let textArray = JSON.stringify(value, null, '\\t').split('\\n');\n        let regex = /^(\\t*{\\t*)|(\\t*}\\t*)|(\\t*],*\\t*)$/g;\n        for (let textX of textArray){\n          if (!textX.match(regex)){\n            let indent = (textX.split('\\t').length -1) * 20;\n            tt.append('tspan')\n            .text(\" \" + textX.replace(': [',': '))\n            .attr(\"dy\", 22)\n            .attr(\"dx\", indent + 5)\n            .attr(\"x\", 0);\n          }\n\n        }\n      }\n    }\n  }\n}\n\n\nfunction parseTableData(d){\n  var tableData = [];\n  for (let relX of jsondata[d.id]){\n    let rowData = {};\n    if(relX.type){\n      rowData.type = (relX.type + \"\").split('#').pop();\n    } else {\n      rowData.type = \"No Type\";\n    }\n\n    if (relX.value){\n      let tempV = \"\"\n      for (let v of relX.value){\n        if(!v['@value']){\n          tempV += 'Nested value, expand to view';\n        } else {\n          tempV += v['@value'] + \", \";\n        }\n      }\n      rowData.value = tempV.slice(0,-2);\n    } else {\n      rowData.value = \"No Value\";\n    }\n\n    if (relX.path){\n      let tempP = \"\"\n      for (let v of relX.path){\n        if(!v['@id']){\n          tempP += 'Nested path, expand to view';\n        } else {\n          tempP += v['@id'];\n        }\n      }\n      rowData.path = tempP;\n    } else {\n      rowData.path = \"No Path\";\n    }\n    tableData.push(rowData);\n  }\n  return tableData;\n}\n\n\n\nfunction tableClick(index, relationData, newG, innerg, table, expand = true){\n  if (window.event.ctrlKey) {\n    addImportLinks(relationData);\n    start(relationData.node[0][\"@id\"]);\n    return;\n  }\n\n  if (expand === true){\n    document.getElementById(\"large\"+index).style.visibility = \"visible\";\n    document.getElementById(\"small\"+index).style.visibility = \"collapse\";\n  } else {\n    document.getElementById(\"small\"+index).style.visibility = \"visible\";\n    document.getElementById(\"large\"+index).style.visibility = \"collapse\";\n  }\n\n  let bboxT = table.node();\n  innerg.attr(\"width\", bboxT.offsetWidth).attr(\"height\", bboxT.offsetHeight);\n\n  let bbox = svgEG.node().getBBox();\n  svgE.attr(\"viewBox\", \"0,0,\"+(bbox.width+bbox.x)+\",\"+(bbox.height+bbox.y))\n  .attr(\"width\", (bbox.width+bbox.x))\n  .attr(\"height\", (bbox.height+bbox.y));\n}\n\n\n\nfunction createExtraCell(relX){\n  const regex = /^(\\t*{\\t*)|(\\t*}\\t*)|(\\t*],*\\t*)$/g;\n  let textX = \"\";\n  if (relX.type){\n    textX += \"type: \" + relX.type + \"\\n\";\n  } else {\n    textX += \"Relation has no type\" + \"\\n\";\n  }\n\n  if (relX.value){\n    for (let v of relX.value){\n      if(!v['@value']){\n        textX += \"value: \" + \"\\n\";\n        let textArray = JSON.stringify(v, null, '\\t').split('\\n');\n        for (let textXX of textArray){\n          if (!textXX.match(regex)){\n            if (textXX.slice(-1) == '['){\n              textX += textXX.slice(0,-1) + \"\\n\";\n            } else {\n              textX += textXX + \"\\n\";\n            }\n          }\n        }\n      } else {\n        textX += \"value: \" + v['@value'] + \"\\n\";\n      }\n    }\n  } else {\n    textX += \"Relation has no value\" + \"\\n\";\n  }\n\n\n  if (relX.path){\n    for (let v of relX.path){\n      if(!v['@id']){\n        textX += \"path: \" + \"\\n\";\n        let textArray = JSON.stringify(v, null, '\\t').split('\\n');\n        for (let textXX of textArray){\n          if (!textXX.match(regex)){\n            if (textXX.slice(-1) == '['){\n              textX += textXX.slice(0,-1) + \"\\n\";\n            } else {\n              textX += textXX + \"\\n\";\n            }\n          }\n        }\n      } else {\n        textX += \"path: \" + v['@id'] + \"\\n\";\n      }\n    }\n  } else {\n    textX += \"Relation has no path\" + \"\\n\";\n  }\n\n  if (relX.node){\n    for (let v of relX.node){\n      textX += \"node: \" + v['@id'] + \"\\n\";\n    }\n  } else {\n    textX += \"Relation has no node\" + \"\\n\";\n  }\n\n\n  if (relX.remainingItems){\n    for (let v of relX.remainingItems){\n      textX += \"remainingItems: \" + v['@value'] + \"\\n\";\n      if(v['@type']){\n        textX += \"remainingItemsType: \" + v['@type'] + \"\\n\";\n      }\n    }\n  }\n\n  for (let pAttr of relationSpecial){\n    if (relX[pAttr]){\n      textX += `${pAttr}:` + \"\\n\";\n      for (const value of Object.values(relX[pAttr])) {\n        let textArray = JSON.stringify(value, null, '\\t').split('\\n');\n        for (let textXX of textArray){\n          if (!textXX.match(regex)){\n            if (textXX.slice(-1) == '['){\n              textX += textXX.slice(0,-1) + \"\\n\";\n            } else {\n              textX += textXX + \"\\n\";\n            }\n          }\n\n        }\n      }\n    }\n  }\n  return textX;\n}\n","var members;\nvar membersFailed;\nvar remainingMembersSetter;\nvar nodeValidation;\nvar holder;\nvar holderId;\n\n\n\nexport function setValues(_members, _membersFailed, _remainingMembersSetter, _nodeValidation, _holderId){\n  members = _members;\n  membersFailed = _membersFailed;\n  remainingMembersSetter = _remainingMembersSetter;\n  nodeValidation = _nodeValidation;\n  holderId = _holderId;\n}\n\nexport function drawMembers(d){\n  holder = document.getElementById(holderId);\n\n  if (members[d.name]){\n    remainingMembersSetter(\"Number of members found for selected resource: \" + members[d.name].size + \".\\n\");\n  } else {\n    remainingMembersSetter(\"Number of members found for selected resource: 0.\\n\");\n  }\n\n  holder.replaceChildren();\n  showMemberHolder(d);\n\n}\n\nfunction showMemberHolder(d){\n\n  if(!members[d.name] || members[d.name].size == 0) {\n    holder.appendChild(document.createTextNode(\"This node has no members.\"));\n  }\n\n  if (membersFailed && membersFailed[d.name]){\n    for (let tempA of membersFailed[d.name]){\n      let details = document.createElement(\"details\");\n      let summary = document.createElement(\"summary\");\n      details.classList.add('failedMember');\n      summary.appendChild(document.createTextNode(tempA));\n      details.appendChild(summary);\n      let textHolder = document.createElement(\"div\");\n      textHolder.appendChild(document.createTextNode(members[d.name].get(tempA) + \"\\n\" + nodeValidation[d.name][tempA]));\n      textHolder.style[\"margin-left\"] = \"1.5rem\";\n      details.appendChild(textHolder);\n      holder.appendChild(details);\n    }\n  }\n\n  if (members[d.name]){\n    for (let tempA of members[d.name].keys()){\n      if (!membersFailed[d.name] || !membersFailed[d.name].includes(tempA)){\n        let details = document.createElement(\"details\");\n        let summary = document.createElement(\"summary\");\n        summary.appendChild(document.createTextNode(tempA));\n        details.appendChild(summary);\n        details.appendChild(document.createTextNode(members[d.name].get(tempA)));\n        holder.appendChild(details);\n      }\n    }\n  }\n}\n","import * as d3 from \"d3\";\nimport {collectionSpecial} from './dataFunctions.js'\n\nvar myGreen;\n// Value between 1 and 0 deciding the speed of graph drawing (lower means slower but better spread betweed nodes)\nvar alpha_decay_rate = 0.5;\nvar jsondata;\nvar svg;\nvar link;\nvar myLinkData;\nvar linkLabel;\nvar parentIdString;\nvar start;\n// Change this if you want nodes to be further apart\nconst nodeDistance = 100;\n\nexport function setValues(_myGreen, _jsondata, _parentIdString, _linkData, _start){\n  myGreen = _myGreen;\n  jsondata = _jsondata;\n  parentIdString = _parentIdString;\n  myLinkData = _linkData;\n  start = _start;\n}\n\n\nexport function updateSelected(d){\n  if (svg){\n    svg.selectAll(\"rect\").style(\"stroke-width\", \"1\").style(\"fill\", \"white\");\n    svg.selectAll(\".node_g[url_id='\" + d.id + \"'], .view_g[url_id='\" + d.id + \"']\").selectAll(\"rect\").style(\"stroke-width\", \"3\").style(\"fill\", \"url(#diagonalHatch)\");\n  }\n}\n\n\nexport function drawGraph() {\n  const width = document.getElementById(parentIdString).offsetWidth;\n  const height = document.getElementById(parentIdString).offsetHeight;\n\n  //clear the graph on redrawing\n  d3.select(\"#\"+parentIdString).selectAll(\"svg\").remove();\n\n  const linkData = [];\n  jsondata.links.forEach((s, k) => {s.forEach(v => linkData.push({\"source\":k,\"target\":v}))});\n\n  let targets = linkData.map(v => v.target);\n  //Every node should have a link that ends in that node, if not connect it to the collection\n  jsondata.nodes.forEach(v => {\n    if (!targets.includes(v.id)){\n      linkData.push({\"source\":jsondata.collection[0].id,\"target\":v.id,\"fakeLink\":true});\n      myLinkData.set(jsondata.collection[0].id+v.id, \"subset\")\n    }\n  });\n\n  svg = d3.select(\"#\"+parentIdString)\n  .append(\"svg\")\n  .attr(\"width\", \"100%\")\n  .attr(\"height\", \"100%\")\n  .attr(\"pointer-events\", \"all\")\n\n\n\n  var all = jsondata.collection.concat(jsondata.shapes.concat(jsondata.nodes.concat(jsondata.views)));\n\n\n  // The event.transform does not change during session, it simply gets added onto every time\n  // So just safe the value on the main svg so we can use it in calculations\n  // We can't use this with transform directly because links depend on actual x and y data, not the translated attributes\n  svg.attr(\"prevTX\", 0).attr(\"prevTY\", 0).attr(\"scaleAll\", 1);\n\n\n  // This creates the 'arrows' on the link lines\n  svg.append(\"marker\")\n  .attr(\"id\", \"arrow\")\n  .attr(\"markerUnits\",\"userSpaceOnUse\")\n  .attr(\"viewBox\", \"0 -5 10 10\")\n  .attr(\"refX\",0)//Arrow coordinates\n  .attr(\"refY\", 0)\n  .attr(\"markerWidth\", 12)//The size of the logo\n  .attr(\"markerHeight\", 12)\n  .attr(\"orient\", \"auto\")//Drawing direction, can be set to: auto (automatically confirm the direction) and angle value\n  .attr(\"stroke-width\",2)//arrow width\n  .append(\"path\")\n  .attr(\"d\", \"M0,-5L10,0L0,5\")//The path of the arrow\n  .attr('fill','gray');//Arrow color\n\n\n  // This creates the diagonal line background on the currently selected rectangle\n  svg\n  .append('defs')\n  .append('pattern')\n    .attr('id', 'diagonalHatch')\n    .attr('patternUnits', 'userSpaceOnUse')\n    .attr('width', 4)\n    .attr('height', 4)\n  .append('path')\n    .attr('d', 'M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2')\n    .attr('stroke', '#cef5ce')\n    .attr('stroke-width', 1);\n\n\n  link = svg.selectAll(\".edgepath\")\n  .data(linkData)\n  .enter().append(\"polyline\")\n  .style(\"stroke\",\"gray\")\n  .style(\"pointer-events\", \"none\")\n  .style(\"stroke-width\",0.5)\n  .style('stroke-dasharray', function(d){\n    if (d.fakeLink){\n      return '10, 5';\n    }\n    return '10, 0';\n  })\n  .attr(\"marker-mid\", \"url(#arrow)\" );\n\n  linkLabel = svg.selectAll(\".linkLabel\")\n  .data(linkData)\n  .enter().append(\"text\")\n  .text(function(d){\n    if (!myLinkData.has(\"\" + d.source + d.target)){\n      return \"\";\n    }\n    let txt = myLinkData.get(\"\" + d.source + d.target);\n\n    if (txt.length > 25){\n      return txt.slice(0,18)+\"...\"+txt.slice(-5);\n    }\n    return txt;\n  });\n\n  linkLabel.append(\"title\").text(function(d){return myLinkData.get(\"\" + d.source + d.target)});\n\n\n  if (jsondata.collection.length > 0){\n    const collection = svg\n    .selectAll(\"gcollection\")\n    .data(jsondata.collection)\n    .join(\"g\")\n    .attr(\"class\", \"collection_g main_g\")\n    .attr(\"expanded\", \"false\")\n    .on(\"click\", clickCollection)\n    .call(d3.drag()\n    .on(\"start\", dragstartX)\n    .on(\"end\", dragendX)\n    .on(\"drag\", dragX));\n\n    collection.append(\"text\")\n    .attr(\"text-anchor\", \"start\")\n    .attr(\"class\", \"collection_text main_text\")\n    .attr(\"dy\",20)\n    .attr(\"dx\",5)\n    .text(function(d) {\n      return (d.type + \"\").split('#').pop()\n    })\n    .raise();\n\n    collection.append(\"rect\")\n    .attr(\"class\", \"collection_rect main_rect\")\n    .attr(\"width\", collection.select(\"text\").node().getBBox().width+15)\n    .attr(\"height\", collection.select(\"text\").node().getBBox().height+10)\n    .style(\"stroke\", \"#2cbe16\")\n    .lower();\n  }\n\n  if (jsondata.views.length > 0){\n    const view = svg\n    .selectAll(\"gview\")\n    .data(jsondata.views)\n    .join(\"g\")\n    .attr(\"class\", \"view_g main_g\")\n    .on(\"click\", function(e, d) {\n      svg.selectAll(\"rect\").style(\"stroke-width\", \"1\").style(\"fill\", \"white\");\n      start(d.name);\n      d3.select(this).selectAll(\"rect\").style(\"stroke-width\", \"3\").style(\"fill\", \"url(#diagonalHatch)\");\n    })\n    .call(d3.drag()\n    .on(\"start\", dragstartX)\n    .on(\"end\", dragendX)\n    .on(\"drag\", dragX))\n    .attr(\"url_id\", function(d){return d.id});\n\n    view.append(\"text\")\n    .attr(\"text-anchor\", \"start\")\n    .attr(\"class\", \"view_text main_text\")\n    .attr(\"dx\", 5)\n    .attr(\"dy\",20)\n    .text(\"\")\n    .raise();\n\n    for (let tg of d3.selectAll(\".view_g\")){\n      d3.select(tg).select(\"text\")\n      .append(\"tspan\").text(function(d){\n        if (d.name.length > 25){\n          return d.name.slice(0,18)+\"...\"+d.name.slice(-5);\n        }\n        return d.name\n      })\n      .attr(\"dx\",5)\n      .on(\"click\", function(e, d){navigator.clipboard.writeText(d.name)})\n      .append(\"title\").text(function(d){return \"click to copy link\\n\" + d.name});\n\n      d3.select(tg).selectAll(\"tspan\").attr(\"x\", 0).attr(\"dy\", 22);\n\n      d3.select(tg).append(\"rect\")\n      .attr(\"class\", \"view_rect main_rect\")\n      .attr(\"width\", d3.select(tg).select(\"text\").node().getBBox().width+15)\n      .attr(\"height\", d3.select(tg).select(\"text\").node().getBBox().height+10)\n      .style(\"stroke\", myGreen)\n      .style('stroke-dasharray', '10,5')\n      .style('stroke-linecap', 'butt')\n      .style(\"stroke-width\", function(d){\n        if (d.selected){\n          return \"3\";\n        } else {\n          return \"1\";\n        }\n      })\n      .style('fill', function(d){\n        if (d.selected){\n          return 'url(#diagonalHatch)';\n        } else {\n          return 'white';\n        }\n      })\n      .lower();\n    }\n  }\n\n\n\n  if (jsondata.shapes.length > 0){\n    const shape = svg\n    .selectAll(\"gshape\")\n    .data(jsondata.shapes)\n    .join(\"g\")\n    .attr(\"class\", \"shape_g main_g\")\n    .attr(\"expanded\", \"false\")\n    .on(\"click\", clickShape)\n    .call(d3.drag()\n    .on(\"start\", dragstartX)\n    .on(\"end\", dragendX)\n    .on(\"drag\", dragX));\n\n    shape.append(\"text\")\n    .attr(\"text-anchor\", \"start\")\n    .attr(\"class\", \"shape_text main_text\")\n    .attr(\"dy\",20)\n    .attr(\"dx\",5)\n    .text(function(d) {\n      return (d.type + \"\").split('#').pop()\n    })\n    .raise();\n\n    shape.append(\"rect\")\n    .attr(\"class\", \"shape_rect main_rect\")\n    .attr(\"width\", shape.select(\"text\").node().getBBox().width+15)\n    .attr(\"height\", shape.select(\"text\").node().getBBox().height+10)\n    .style(\"stroke\", \"#5e915a\")\n    .lower();\n  }\n\n\n\n  if (jsondata.nodes.length > 0){\n    const node = svg\n    .selectAll(\"gnode\")\n    .data(jsondata.nodes)\n    .join(\"g\")\n    .attr(\"class\", \"node_g main_g\")\n    .on(\"click\", function(e, d) {\n      svg.selectAll(\"rect\").style(\"stroke-width\", \"1\").style(\"fill\", \"white\");\n      start(d.name);\n      d3.select(this).selectAll(\"rect\").style(\"stroke-width\", \"3\").style(\"fill\", \"url(#diagonalHatch)\");\n    })\n    .call(d3.drag()\n    .on(\"start\", dragstartX)\n    .on(\"end\", dragendX)\n    .on(\"drag\", dragX))\n    .attr(\"url_id\", function(d){return d.id});\n\n    node.append(\"text\")\n    .attr(\"text-anchor\", \"start\")\n    .attr(\"class\", \"node_text main_text\")\n    .attr(\"dx\", 5)\n    .attr(\"dy\",20)\n    .text(\"\")\n    .raise();\n\n    for (let tg of d3.selectAll(\".node_g\")){\n\n      d3.select(tg).select(\"text\")\n      .append(\"tspan\").text(function(d){\n        if (d.name.length > 25){\n          return d.name.slice(0,18)+\"...\"+d.name.slice(-5);\n        }\n        return d.name\n      })\n      .attr(\"dx\",5)\n      .on(\"click\", function(e, d){navigator.clipboard.writeText(d.name)})\n      .append(\"title\").text(function(d){return \"click to copy link\\n\" + d.name});\n\n      d3.select(tg).selectAll(\"tspan\").attr(\"x\", 0).attr(\"dy\", 22);\n\n      d3.select(tg).append(\"rect\")\n      .attr(\"class\", \"node_rect main_rect\")\n      .attr(\"width\", d3.select(tg).select(\"text\").node().getBBox().width+15)\n      .attr(\"height\", d3.select(tg).select(\"text\").node().getBBox().height+10)\n      .style(\"stroke\", myGreen)\n      .style('stroke-dasharray', '10,5')\n      .style('stroke-linecap', 'butt')\n      .style(\"stroke-width\", function(d){\n        if (d.selected){\n          return \"3\";\n        } else {\n          return \"1\";\n        }\n      })\n      .style('fill', function(d){\n        if (d.selected){\n          return 'url(#diagonalHatch)';\n        } else {\n          return 'white';\n        }\n      })\n      .lower();\n    }\n  }\n\n  // This creates the actual graph, first create the links\n  // Then push every node to the center, then spread them out again\n  d3.forceSimulation(all)\n  .force(\"link\", d3.forceLink()\n  .id(function(d) { return d.id; })\n  .links(linkData))\n  .force(\"center\", d3.forceCenter(width / 2, height / 2))\n  .force(\"collide\", d3.forceCollide(nodeDistance))\n  .alphaDecay(alpha_decay_rate)\n  .on(\"end\", firstTick);\n\n\n\n\n  // d3 sees zooming and panning as the same thing, strange design choice\n  const zoom = d3.zoom();\n\n  //while panning linklabels wont move because we use translate instead of changing x and y\n  zoom.on(\"zoom\", function(e) {\n    d3.selectAll(\".main_g\")\n    .attr(\"transform\", function(){return \"translate(\"+(e.transform.x - svg.attr(\"prevTX\"))+\",\"+(e.transform.y - svg.attr(\"prevTY\"))+\")scale(\"+e.transform.k+\")\"});\n\n    fixLinks();\n    link.attr(\"transform\", function(){return \"translate(\"+(e.transform.x - svg.attr(\"prevTX\"))+\",\"+(e.transform.y - svg.attr(\"prevTY\"))+\")scale(\"+e.transform.k+\")\"});\n  });\n\n  // At the end of a zoom we only keep scale attribute and calculate the correct x and y attributes based of the translation\n  zoom.on(\"end\", function(e) {\n    d3.selectAll(\".main_g\")\n    .attr(\"x\", function(d) { d.x += e.transform.x*(1/e.transform.k) - svg.attr(\"prevTX\")*(1/e.transform.k)})\n    .attr(\"y\", function(d) { d.y += e.transform.y*(1/e.transform.k) - svg.attr(\"prevTY\")*(1/e.transform.k)})\n    .attr(\"transform\", function(){return \"scale(\"+e.transform.k+\")\"});\n\n\n    svg.attr(\"prevTX\", e.transform.x).attr(\"prevTY\", e.transform.y).attr(\"scaleAll\", e.transform.k);\n    // zoomScale = e.transform.k;\n    fixGroupChildren()\n    fixLinks();\n  });\n\n  // connect the zoom function to the main svg element\n  svg.call(zoom);\n}\n\nfunction firstTick(){\n  ticked();\n\n  // svg.selectAll(\".collection_g\").attr(\"x\", function(d){d.x=50; return d.x}).attr(\"y\", function(d){d.y=20; return d.y});\n  // svg.selectAll(\".shape_g\").attr(\"x\", function(d){d.x=200+50; return d.x}).attr(\"y\", function(d){d.y=20; return d.y});\n\n  fixGroupChildren();\n  fixLinks();\n}\n\n\n// Call this after changing the graph\nfunction ticked() {\n  // This simply sets the attribute to the given (parent) data x and y\n  d3.selectAll(\".maing_g\")\n  .attr(\"x\", function(d) {\n    return d.x;\n  })\n  .attr(\"y\", function(d) {\n    return d.y;\n  });\n\n  fixGroupChildren();\n  fixLinks();\n}\n\n\nfunction fixLinks(){\n  let scaleN = 1;\n  if (svg.attr(\"scaleAll\")){\n    scaleN = svg.attr(\"scaleAll\");\n  }\n  link.attr(\"transform\", \"scale(\"+scaleN+\")\");\n  // Calculate start, mid, end\n  link.attr(\"points\", function(d) {\n    return [\n      d.source.x, d.source.y,\n      d.source.x/2+d.target.x/2, d.source.y/2+d.target.y/2,\n      d.target.x, d.target.y\n    ].join(',');\n  })\n\n  linkLabel.attr(\"transform\", function(d) {\n    var angle = Math.atan((d.source.y - d.target.y) / (d.source.x - d.target.x)) * 180 / Math.PI;\n    if (!angle){\n      angle = 0;\n    }\n    return 'translate(' + [((d.source.x + d.target.x)*scaleN / 2), ((d.source.y + d.target.y)*scaleN / 2)] + ')rotate(' + angle + ')'+\"scale(\"+scaleN+\")\";\n  })\n  .attr(\"y\", function(d){\n    // This fixes double links having labels on top of each other\n    if (d.source.x > d.target.x){\n      return \"-10\";\n    } else {\n      return \"15\";\n    }\n  })\n  .attr(\"x\", function(){\n    if (!d3.select(this).node().getBBox()){\n      return 0;\n    }\n    return -1*d3.select(this).node().getBBox().width / 2;\n  });\n}\n\n\nfunction fixGroupChildren(){\n  d3.selectAll(\".main_text, .main_rect\")\n  .attr(\"x\", function(d) {return d.x;})\n  .attr(\"y\", function(d) {return d.y;});\n\n  svg.selectAll(\"tspan\")\n  .attr(\"x\", function(d) {return d.x;})\n}\n\n\nfunction dragstartX() {\n  d3.select(this).attr(\"stroke\", \"black\");\n}\n\nfunction dragX(e, d) {\n  // d3.select(this).attr(\"x\", d.x = d.x - (d.x-e.x)*scaleN).attr(\"y\", d.y = d.y - (d.y-e.y)*scaleN);\n  d3.select(this).attr(\"x\", d.x = e.x).attr(\"y\", d.y = e.y);\n  ticked();\n}\n\nfunction dragendX() {\n  d3.select(this).attr(\"stroke\", null);\n  ticked();\n}\n\n\nfunction clickCollection(e, d){\n  let currentg = d3.select(e.target.parentNode);\n  if (!currentg.classed(\"collection_g\")){\n    currentg = d3.select(currentg._groups.pop().pop().parentNode);\n  }\n\n  expandCollection(currentg, d);\n\n  ticked();\n}\n\nfunction expandCollection(currentg, d){\n  if(currentg.attr(\"expanded\") == \"false\"){\n    currentg.attr(\"expanded\", \"true\");\n\n    expandCollectionTrue(currentg, d);\n\n  } else {\n    currentg.attr(\"expanded\", \"false\");\n\n    currentg.select(\"text\").text((d.type + \"\").split('#').pop())\n    currentg.select(\"rect\").attr(\"width\", 1);\n\n    currentg.select(\"rect\")\n    .attr(\"height\", 30)\n    .attr(\"width\", currentg.node().getBBox().width + 10);\n  }\n}\n\nfunction expandCollectionTrue(currentg, d){\n  currentg.raise();\n  let tt = currentg.select(\"text\");\n  tt.text(\"\");\n\n  tt.append(\"tspan\").text(\"Collection\")\n  .attr(\"dx\",5);\n\n  tt.append(\"tspan\").text(d.id)\n  .attr(\"dx\",15);\n\n  for (let pAttr of collectionSpecial){\n    if (d[pAttr]){\n      tt.append(\"tspan\").text(`${pAttr}:`)\n      .attr(\"dx\",5);\n      for (const value of Object.values(d[pAttr])) {\n        let textArray = JSON.stringify(value, null, '\\t').split('\\n');\n        let regex = /^(\\t*{\\t*)|(\\t*}\\t*)|(\\t*],*\\t*)$/g;\n        for (let textX of textArray){\n          if (!textX.match(regex)){\n            let indent = (textX.split('\\t').length -1) * 20;\n            tt.append('tspan')\n            .text(\" \" + textX.replace(': [',': '))\n            .attr(\"dx\", indent + 15);\n          }\n        }\n      }\n    }\n  }\n\n  tt.selectAll(\"tspan\").attr(\"dy\", 22).attr(\"x\",0);\n\n  currentg.select(\"rect\")\n  .attr(\"height\", 10 + currentg.select(\"text\").node().getBBox().height)\n\n  currentg.select(\"rect\").attr(\"width\", currentg.select(\"text\").node().getBBox().width + 10);\n}\n\n\nfunction clickShape(e, d){\n  let currentg = d3.select(e.target.parentNode);\n  if (!currentg.classed(\"shape_g\")){\n    currentg = d3.select(currentg._groups.pop().pop().parentNode);\n  }\n\n  expandShape(currentg, d);\n  ticked();\n}\n\nfunction expandShape(currentg, d){\n  if(currentg.attr(\"expanded\") == \"false\"){\n    currentg.attr(\"expanded\", \"true\");\n\n    expandShapeTrue(currentg, d);\n\n  } else {\n    currentg.attr(\"expanded\", \"false\");\n\n    currentg.select(\"text\").text((d.type + \"\").split('#').pop())\n\n    currentg.select(\"rect\")\n    .attr(\"height\", 30)\n    .attr(\"width\", currentg.select(\"text\").node().getBBox().width + 10);\n  }\n}\n\nfunction expandShapeTrue(currentg, d){\n  currentg.raise();\n\n  let textArray = d.shape_extra.split('\\n');\n\n  currentg.select(\"text\").text(\"\");\n\n  for (let textX of textArray){\n    let indent = (textX.split('\\t').length -1) * 20;\n    currentg.select(\"text\").append('tspan')\n    .text(textX.replace('\\t',''))\n    .attr(\"dy\", 20)\n    .attr(\"dx\", indent + 5);\n  }\n  currentg.select(\"text\").selectAll(\"tspan\").attr(\"x\",0);\n  currentg.select(\"rect\")\n  .attr(\"height\", currentg.select(\"text\").node().getBBox().height + 10)\n  .attr(\"width\", currentg.select(\"text\").node().getBBox().width + 10);\n}\n","import { render } from \"./App.vue?vue&type=template&id=7429b407\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=7429b407&lang=css\"\nscript.render = render\n\nexport default script","import { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')\n"],"sourceRoot":""}